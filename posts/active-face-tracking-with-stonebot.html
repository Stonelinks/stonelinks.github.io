<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <title>Active Face Tracking with Stonebot - Stonelinks
    </title>
    <link rel="icon" href="/images/favicon.ico" type="image/x-icon">
    <link rel="shortcut icon" href="/images/favicon.ico" type="image/x-icon">
    <link rel="stylesheet" href="/style/main.css">
  </head>
  <body>
    <div class="chrome-wrapper">
      <div class="chrome-wrapper-inner">
        <div class="chrome-container">
          <div class="masthead clearfix"><a href="/">
              <div class="masthead-logo"><img src="/images/logos/logo-200.png"></div>
              <h1 class="masthead-brand">Stonelinks
              </h1></a>
            <p class="masthead-tagline">Lucas Doyle's Website
            </p>
            <nav>
              <ul class="nav masthead-nav">
                <li><a href="/blog.html">Blog</a></li>
                <li><a href="/luke.html">About</a></li>
                <li><a href="/projects.html">Projects</a></li>
              </ul>
            </nav>
          </div>
          <div id="preloaded-images"></div>
          <div class="container">
            <div class="box-row">
              <div class="row">
                <div class="box">
                  <div class="col-lg-12"><a href="/posts/active-face-tracking-with-stonebot.html">
                      <h1 class="box-title">Active Face Tracking with Stonebot</h1></a>
                    <div class="byline">
                      <p>Published in<a href="/tag/robots/1/"><span class="label label-primary tag">robots</span></a><a href="/tag/computer%20vision/1/"><span class="label label-primary tag">computer vision</span></a><a href="/tag/python/1/"><span class="label label-primary tag">python</span></a>
                      </p>
                      <p>March 14, 2011 by&nbsp;<a href="/luke.html">Lucas Doyle</a>
                      </p>
                    </div>
                    <div class="external-links"><p>I finally have it working! Very excited as I write this. So glad spring break exists otherwise I’d never have the time for this. Long story short, I have face detection working on my personal robot. Check out the video after the break to see it in&nbsp;action.</p>
<div class="media-container"><br><br><iframe src="http://www.youtube.com/embed/RRwMJ8GYT7Y" frameborder="0" allowfullscreen></iframe><br><br></div>

<p>This has been a goal of mine ever since I started building my personal robot (which, in keeping with the Stonelinks legacy, shall henceforth be known as “Stonebot”). This face tracking makes use of my <a href="/posts/a-more-accurate-coordinate-system/">new method for positioning the camera</a> that I worked on a little over winter break, and is probably the most complicated piece of python I have written to date. Here are some highlights of the&nbsp;project:</p>
<p><span class="more"></span></p>
<h3 id="opencv">OpenCV</h3>
<p>By far, the hardest thing about this was getting OpenCV set up correctly. Once set up, it is relatively easy to use, comes with a lot of cool examples and seems extremely powerful (if you don’t believe me check out what the folks over at <a href="http://www.willowgarage.com/">Willow Garage</a> do with it on a routine basis). In the future it is definitely something I want to experiment more with, and not just use for face and object&nbsp;detection.</p>
<p>So a summary of the build process: If you’re like me and running Ubuntu 10.04, you’ll want to save some time from having to compile OpenCV from source (especially if you are on a 900MHz single core eee pc like I originally was). Unfortunately, the most recent version of OpenCV is 2.2 while the latest version in the official Ubuntu repos it is only 2.0. Now normally I would not care about using an older version of the same library, however when I looked at the python examples for 2.2, 2.1 and 2.0, things looked much cleaner in 2.2 and 2.1 (you can import everything under the single namespace using <code>import cv</code> in 2.1 on up for&nbsp;example).</p>
<p>Additionally, presumably the newer the library, the better it will be. I tried compiling OpenCV 2.1 and 2.2 a couple of times with no luck on various machines (the eee included… that took about an hour and a half). However I was delighted to find that someone that someone had compiled 2.1 for Ubuntu 10.04 and 10.10. All that was needed to be done to install it&nbsp;was:</p>
<pre><code class="lang-bash">$ sudo add-apt-repository ppa:gijzelaar/OpenCV2
$ sudo apt-get update
$ sudo apt-get install OpenCV python-OpenCV
</code></pre>
<p>and OpenCV is yours for the taking! Install the documentation and run the examples to figure out if all your <span class="caps">V4L2</span> and webcam drivers will play nice with&nbsp;it.</p>
<h3 id="classifiers-are-easily-fooled">Classifiers are easily&nbsp;fooled</h3>
<div class="media-container"><br><br><img src="http://i.imgur.com/XPuhpl.jpg"><br><br></div>

<p>This is pretty self explanatory. I drew the above face with a purple magic marker in about five seconds and it is able to fool the Haar&nbsp;classifier.</p>
<p>Additionally, I have found that the wrong lighting, glasses, and long hair can throw it off as well. To be fair, Haar feature detection in this case is not incredibly accurate. The advantage it possesses in this application is relatively low computational complexity which translates into a speedy detection&nbsp;algorithm.</p>
<h3 id="cpu-speed"><span class="caps">CPU</span> speed</h3>
<p>As I said in the video, performance on the eee <span class="caps">PC</span> was terrible. While not surprising, this is kind of upsetting as I was considering putting it to use as the brains of the robot once I add some sort of locomotion to the system. I was pleasantly surprised however when I loaded up the code on to my new laptop (which has a Core 2 duo operating at 1.3GHz) and things worked beautifully. It would seem that OpenCV, even though I thought that python couldn’t be threaded, is somehow threading itself across both cores of the processor. As I’m still new to python and all of these technology, so sit tight! I’m still learning how all this stuff&nbsp;works. </p>
</div>
                  </div>
                </div>
              </div>
              <div class="row">
                <div class="box">
                  <div class="col-lg-12 footer-nav"><a href="/blog.html">
                      <h4 class="pull-left">« Back</h4></a></div>
                </div>
              </div>
            </div>
          </div>
          <div class="mastfoot"><a href="https://www.facebook.com/stonelinks" target="_blank" class="social"><i class="fa fa-facebook"></i></a><a href="https://github.com/Stonelinks" target="_blank" class="social"><i class="fa fa-github"></i></a><a href="https://twitter.com/#!/Stonelinks" target="_blank" class="social"><i class="fa fa-twitter"></i></a><a href="https://plus.google.com/116178490514652721625/posts" target="_blank" class="social"><i class="fa fa-google-plus"></i></a><a href="http://www.linkedin.com/pub/lucas-doyle/25/550/169" target="_blank" class="social"><i class="fa fa-linkedin"></i></a><a href="http://www.youtube.com/user/RealStonelinks" target="_blank" class="social"><i class="fa fa-youtube"></i></a><a href="mailto:lucas.p.doyle@gmail.com?Subject=Hello" target="_top">Contact me</a>
          </div>
        </div>
      </div>
    </div>
    <script src="/node_modules/jquery/dist/jquery.js"></script>
    <script src="/node_modules/underscore/underscore.js"></script>
    <script src="/node_modules/bootstrap/dist/js/bootstrap.min.js"></script>
    <script type="text/javascript">
      var BASENAME = 'posts/active-face-tracking-with-stonebot';
      (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
      (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
      m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
      })(window,document,'script','//www.google-analytics.com/analytics.js','ga');
      ga('create', 'UA-18750328-2', 'auto');
      ga('send', 'pageview');
    </script>
    <script src="/js/main.js"></script>
  </body>
</html>