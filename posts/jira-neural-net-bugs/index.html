<!DOCTYPE html>
 <html lang="en"><head><meta charset="utf-8"/><meta http-equiv="X-UA-Compatible" content="IE=edge"/><meta name="viewport" content="width=device-width, initial-scale=1.0 maximum-scale=5.0"/><title>Neural Network Bug Generator - Stonelinks</title><style id="typography.js">html{font-family:sans-serif;-ms-text-size-adjust:100%;-webkit-text-size-adjust:100%}body{margin:0}article,aside,details,figcaption,figure,footer,header,main,menu,nav,section,summary{display:block}audio,canvas,progress,video{display:inline-block}audio:not([controls]){display:none;height:0}progress{vertical-align:baseline}[hidden],template{display:none}a{background-color:transparent;-webkit-text-decoration-skip:objects}a:active,a:hover{outline-width:0}abbr[title]{border-bottom:none;text-decoration:underline;text-decoration:underline dotted}b,strong{font-weight:inherit;font-weight:bolder}dfn{font-style:italic}h1{font-size:2em;margin:.67em 0}mark{background-color:#ff0;color:#000}small{font-size:80%}sub,sup{font-size:75%;line-height:0;position:relative;vertical-align:baseline}sub{bottom:-.25em}sup{top:-.5em}img{border-style:none}svg:not(:root){overflow:hidden}code,kbd,pre,samp{font-family:monospace,monospace;font-size:1em}figure{margin:1em 40px}hr{box-sizing:content-box;height:0;overflow:visible}button,input,optgroup,select,textarea{font:inherit;margin:0}optgroup{font-weight:700}button,input{overflow:visible}button,select{text-transform:none}[type=reset],[type=submit],button,html [type=button]{-webkit-appearance:button}[type=button]::-moz-focus-inner,[type=reset]::-moz-focus-inner,[type=submit]::-moz-focus-inner,button::-moz-focus-inner{border-style:none;padding:0}[type=button]:-moz-focusring,[type=reset]:-moz-focusring,[type=submit]:-moz-focusring,button:-moz-focusring{outline:1px dotted ButtonText}fieldset{border:1px solid silver;margin:0 2px;padding:.35em .625em .75em}legend{box-sizing:border-box;color:inherit;display:table;max-width:100%;padding:0;white-space:normal}textarea{overflow:auto}[type=checkbox],[type=radio]{box-sizing:border-box;padding:0}[type=number]::-webkit-inner-spin-button,[type=number]::-webkit-outer-spin-button{height:auto}[type=search]{-webkit-appearance:textfield;outline-offset:-2px}[type=search]::-webkit-search-cancel-button,[type=search]::-webkit-search-decoration{-webkit-appearance:none}::-webkit-input-placeholder{color:inherit;opacity:.54}::-webkit-file-upload-button{-webkit-appearance:button;font:inherit}html{font:112.5%/1.61em Lato,sans-serif;box-sizing:border-box;overflow-y:scroll;}*{box-sizing:inherit;}*:before{box-sizing:inherit;}*:after{box-sizing:inherit;}body{color:hsla(0,0%,0%,0.8);font-family:Lato,sans-serif;font-weight:400;word-wrap:break-word;}img{max-width:100%;margin-left:0;margin-right:0;margin-top:0;padding-bottom:0;padding-left:0;padding-right:0;padding-top:0;margin-bottom:1.61rem;}h1{margin-left:0;margin-right:0;margin-top:0;padding-bottom:0;padding-left:0;padding-right:0;padding-top:0;margin-bottom:1.61rem;color:inherit;font-family:Lato,sans-serif;font-weight:700;text-rendering:optimizeLegibility;font-size:1.618rem;line-height:2.415rem;}h2{margin-left:0;margin-right:0;margin-top:0;padding-bottom:0;padding-left:0;padding-right:0;padding-top:0;margin-bottom:1.61rem;color:inherit;font-family:Lato,sans-serif;font-weight:700;text-rendering:optimizeLegibility;font-size:1.33471rem;line-height:1.61rem;}h3{margin-left:0;margin-right:0;margin-top:0;padding-bottom:0;padding-left:0;padding-right:0;padding-top:0;margin-bottom:1.61rem;color:inherit;font-family:Lato,sans-serif;font-weight:700;text-rendering:optimizeLegibility;font-size:1.21225rem;line-height:1.61rem;}h4{margin-left:0;margin-right:0;margin-top:0;padding-bottom:0;padding-left:0;padding-right:0;padding-top:0;margin-bottom:1.61rem;color:inherit;font-family:Lato,sans-serif;font-weight:700;text-rendering:optimizeLegibility;font-size:1rem;line-height:1.61rem;}h5{margin-left:0;margin-right:0;margin-top:0;padding-bottom:0;padding-left:0;padding-right:0;padding-top:0;margin-bottom:1.61rem;color:inherit;font-family:Lato,sans-serif;font-weight:700;text-rendering:optimizeLegibility;font-size:0.90825rem;line-height:1.61rem;}h6{margin-left:0;margin-right:0;margin-top:0;padding-bottom:0;padding-left:0;padding-right:0;padding-top:0;margin-bottom:1.61rem;color:inherit;font-family:Lato,sans-serif;font-weight:700;text-rendering:optimizeLegibility;font-size:0.86558rem;line-height:1.61rem;}hgroup{margin-left:0;margin-right:0;margin-top:0;padding-bottom:0;padding-left:0;padding-right:0;padding-top:0;margin-bottom:1.61rem;}ul{margin-left:1.61rem;margin-right:0;margin-top:0;padding-bottom:0;padding-left:0;padding-right:0;padding-top:0;margin-bottom:1.61rem;list-style-position:outside;list-style-image:none;}ol{margin-left:1.61rem;margin-right:0;margin-top:0;padding-bottom:0;padding-left:0;padding-right:0;padding-top:0;margin-bottom:1.61rem;list-style-position:outside;list-style-image:none;}dl{margin-left:0;margin-right:0;margin-top:0;padding-bottom:0;padding-left:0;padding-right:0;padding-top:0;margin-bottom:1.61rem;}dd{margin-left:0;margin-right:0;margin-top:0;padding-bottom:0;padding-left:0;padding-right:0;padding-top:0;margin-bottom:1.61rem;}p{margin-left:0;margin-right:0;margin-top:0;padding-bottom:0;padding-left:0;padding-right:0;padding-top:0;margin-bottom:1.61rem;}figure{margin-left:0;margin-right:0;margin-top:0;padding-bottom:0;padding-left:0;padding-right:0;padding-top:0;margin-bottom:1.61rem;}pre{margin-left:0;margin-right:0;margin-top:0;padding-bottom:0;padding-left:0;padding-right:0;padding-top:0;margin-bottom:1.61rem;font-size:0.85rem;line-height:1.61rem;}table{margin-left:0;margin-right:0;margin-top:0;padding-bottom:0;padding-left:0;padding-right:0;padding-top:0;margin-bottom:1.61rem;font-size:1rem;line-height:1.61rem;border-collapse:collapse;width:100%;}fieldset{margin-left:0;margin-right:0;margin-top:0;padding-bottom:0;padding-left:0;padding-right:0;padding-top:0;margin-bottom:1.61rem;}blockquote{margin-left:1.61rem;margin-right:1.61rem;margin-top:0;padding-bottom:0;padding-left:0;padding-right:0;padding-top:0;margin-bottom:1.61rem;}form{margin-left:0;margin-right:0;margin-top:0;padding-bottom:0;padding-left:0;padding-right:0;padding-top:0;margin-bottom:1.61rem;}noscript{margin-left:0;margin-right:0;margin-top:0;padding-bottom:0;padding-left:0;padding-right:0;padding-top:0;margin-bottom:1.61rem;}iframe{margin-left:0;margin-right:0;margin-top:0;padding-bottom:0;padding-left:0;padding-right:0;padding-top:0;margin-bottom:1.61rem;}hr{margin-left:0;margin-right:0;margin-top:0;padding-bottom:0;padding-left:0;padding-right:0;padding-top:0;margin-bottom:calc(1.61rem - 1px);background:hsla(0,0%,0%,0.2);border:none;height:1px;}address{margin-left:0;margin-right:0;margin-top:0;padding-bottom:0;padding-left:0;padding-right:0;padding-top:0;margin-bottom:1.61rem;}b{font-weight:700;}strong{font-weight:700;}dt{font-weight:700;}th{font-weight:700;}li{margin-bottom:calc(1.61rem / 2);}ol li{padding-left:0;}ul li{padding-left:0;}li > ol{margin-left:1.61rem;margin-bottom:calc(1.61rem / 2);margin-top:calc(1.61rem / 2);}li > ul{margin-left:1.61rem;margin-bottom:calc(1.61rem / 2);margin-top:calc(1.61rem / 2);}code{font-size:0.85rem;line-height:1.61rem;}kbd{font-size:0.85rem;line-height:1.61rem;}samp{font-size:0.85rem;line-height:1.61rem;}abbr{border-bottom:1px dotted hsla(0,0%,0%,0.5);cursor:help;}acronym{border-bottom:1px dotted hsla(0,0%,0%,0.5);cursor:help;}abbr[title]{border-bottom:1px dotted hsla(0,0%,0%,0.5);cursor:help;text-decoration:none;}thead{text-align:left;}td,th{text-align:left;border-bottom:1px solid hsla(0,0%,0%,0.12);font-feature-settings:tnum;padding-left:1.07333rem;padding-right:1.07333rem;padding-top:0.805rem;padding-bottom:calc(0.805rem - 1px);}th:first-child,td:first-child{padding-left:0;}th:last-child,td:last-child{padding-right:0;}</style><link rel="stylesheet" type="text/css" href="/font-awesome.css"/><link rel="stylesheet" type="text/css" href="/image-gallery.css"/><link rel="stylesheet" type="text/css" href="/css/zenburn.css"/><link rel="stylesheet" type="text/css" href="/css/style.css"/><link href="//fonts.googleapis.com/css?family=Lato:400,700" rel="stylesheet" type="text/css"/></head><body><div id="react-mount"><div style="max-width:41.86rem;margin-left:auto;margin-right:auto;padding:1.2075rem;" data-reactroot="" data-reactid="1" data-react-checksum="1572133480"><header style="margin-bottom:1.61rem;" data-reactid="2"><div data-reactid="3"><h3 style="margin-top:0;margin-bottom:0;font-size:1.33471rem;line-height:1.61rem;" data-reactid="4"><a style="box-shadow:none;text-decoration:none;color:inherit;" href="/" data-reactid="5"><img src="/icon.png" style="margin:0;margin-top:-4px;border:0;width:35px;height:35px;vertical-align:middle;" data-reactid="6"/><!-- react-text: 7 --> <!-- /react-text --><!-- react-text: 8 -->Stonelinks<!-- /react-text --></a></h3></div><hr style="margin-top:0.805rem;margin-bottom:0.805rem;background-color:gray;" data-reactid="9"/><span data-reactid="10"><a href="/" data-reactid="11">Home</a><!-- react-text: 12 --> | <!-- /react-text --><a href="/posts/" data-reactid="13">Posts</a><!-- react-text: 14 --> | <!-- /react-text --><a href="/projects/" data-reactid="15">Projects</a><!-- react-text: 16 --> | <!-- /react-text --><a href="/about/" data-reactid="17">About</a></span></header><div class="markdown" data-reactid="18"><div data-reactid="19"><h1 style="margin-top:0;margin-bottom:0.4025rem;" data-reactid="20">Neural Network Bug Generator</h1><div style="margin-top:0.4025rem;margin-bottom:0.805rem;font-size:0.805rem;color:gray;" data-reactid="21">08/15/2016</div></div><section class="image-gallery" data-reactid="22"><div class="image-gallery-content" data-reactid="23"><div class="image-gallery-slide-wrapper" data-reactid="24"><a class="image-gallery-fullscreen-button" data-reactid="25"></a><a class="image-gallery-play-button" data-reactid="26"></a><span data-reactid="27"><button type="button" class="image-gallery-left-nav" data-reactid="28"></button><button type="button" class="image-gallery-right-nav" data-reactid="29"></button></span><div class="image-gallery-swipe" data-reactid="30"><div class="image-gallery-slides" data-reactid="31"><div class="image-gallery-slide center" style="-webkit-transform:translate3d(0%, 0, 0);-moz-transform:translate3d(0%, 0, 0);-ms-transform:translate3d(0%, 0, 0);-o-transform:translate3d(0%, 0, 0);transform:translate3d(0%, 0, 0);z-index:3;" data-reactid="32"><div class="image-gallery-image" data-reactid="33"><img src="/posts/jira-neural-net-bugs/Pasted image at 2016_08_14 08_48 PM.png" data-reactid="34"/></div></div><div class="image-gallery-slide right" style="-webkit-transform:translate3d(100%, 0, 0);-moz-transform:translate3d(100%, 0, 0);-ms-transform:translate3d(100%, 0, 0);-o-transform:translate3d(100%, 0, 0);transform:translate3d(100%, 0, 0);z-index:1;" data-reactid="35"><div class="image-gallery-image" data-reactid="36"><img src="/posts/jira-neural-net-bugs/Pasted image at 2016_08_14 08_50 PM (1).png" data-reactid="37"/></div></div><div class="image-gallery-slide" style="-webkit-transform:translate3d(200%, 0, 0);-moz-transform:translate3d(200%, 0, 0);-ms-transform:translate3d(200%, 0, 0);-o-transform:translate3d(200%, 0, 0);transform:translate3d(200%, 0, 0);z-index:1;" data-reactid="38"><div class="image-gallery-image" data-reactid="39"><img src="/posts/jira-neural-net-bugs/Pasted image at 2016_08_14 08_52 PM.png" data-reactid="40"/></div></div><div class="image-gallery-slide" style="-webkit-transform:translate3d(300%, 0, 0);-moz-transform:translate3d(300%, 0, 0);-ms-transform:translate3d(300%, 0, 0);-o-transform:translate3d(300%, 0, 0);transform:translate3d(300%, 0, 0);z-index:1;" data-reactid="41"><div class="image-gallery-image" data-reactid="42"><img src="/posts/jira-neural-net-bugs/Pasted image at 2016_08_14 10_06 PM (1).png" data-reactid="43"/></div></div><div class="image-gallery-slide" style="-webkit-transform:translate3d(400%, 0, 0);-moz-transform:translate3d(400%, 0, 0);-ms-transform:translate3d(400%, 0, 0);-o-transform:translate3d(400%, 0, 0);transform:translate3d(400%, 0, 0);z-index:1;" data-reactid="44"><div class="image-gallery-image" data-reactid="45"><img src="/posts/jira-neural-net-bugs/Pasted image at 2016_08_14 10_09 PM (1).png" data-reactid="46"/></div></div><div class="image-gallery-slide" style="-webkit-transform:translate3d(500%, 0, 0);-moz-transform:translate3d(500%, 0, 0);-ms-transform:translate3d(500%, 0, 0);-o-transform:translate3d(500%, 0, 0);transform:translate3d(500%, 0, 0);z-index:1;" data-reactid="47"><div class="image-gallery-image" data-reactid="48"><img src="/posts/jira-neural-net-bugs/Pasted image at 2016_08_15 07_45 AM (1).png" data-reactid="49"/></div></div><div class="image-gallery-slide" style="-webkit-transform:translate3d(600%, 0, 0);-moz-transform:translate3d(600%, 0, 0);-ms-transform:translate3d(600%, 0, 0);-o-transform:translate3d(600%, 0, 0);transform:translate3d(600%, 0, 0);z-index:1;" data-reactid="50"><div class="image-gallery-image" data-reactid="51"><img src="/posts/jira-neural-net-bugs/Pasted image at 2016_08_15 07_46 AM.png" data-reactid="52"/></div></div><div class="image-gallery-slide" style="-webkit-transform:translate3d(700%, 0, 0);-moz-transform:translate3d(700%, 0, 0);-ms-transform:translate3d(700%, 0, 0);-o-transform:translate3d(700%, 0, 0);transform:translate3d(700%, 0, 0);z-index:1;" data-reactid="53"><div class="image-gallery-image" data-reactid="54"><img src="/posts/jira-neural-net-bugs/Pasted image at 2016_08_15 07_47 AM.png" data-reactid="55"/></div></div><div class="image-gallery-slide left" style="-webkit-transform:translate3d(-100%, 0, 0);-moz-transform:translate3d(-100%, 0, 0);-ms-transform:translate3d(-100%, 0, 0);-o-transform:translate3d(-100%, 0, 0);transform:translate3d(-100%, 0, 0);z-index:1;" data-reactid="56"><div class="image-gallery-image" data-reactid="57"><img src="/posts/jira-neural-net-bugs/Pasted image at 2016_08_15 07_49 AM.png" data-reactid="58"/></div></div></div></div></div><div class="image-gallery-thumbnails" data-reactid="59"><div class="image-gallery-thumbnails-container" style="-webkit-transform:translate3d(0px, 0, 0);-moz-transform:translate3d(0px, 0, 0);-ms-transform:translate3d(0px, 0, 0);-o-transform:translate3d(0px, 0, 0);transform:translate3d(0px, 0, 0);" data-reactid="60"><a class="image-gallery-thumbnail active" data-reactid="61"><img src="/posts/jira-neural-net-bugs/Pasted image at 2016_08_14 08_48 PM.png" data-reactid="62"/><div class="image-gallery-thumbnail-label" data-reactid="63"></div></a><a class="image-gallery-thumbnail" data-reactid="64"><img src="/posts/jira-neural-net-bugs/Pasted image at 2016_08_14 08_50 PM (1).png" data-reactid="65"/><div class="image-gallery-thumbnail-label" data-reactid="66"></div></a><a class="image-gallery-thumbnail" data-reactid="67"><img src="/posts/jira-neural-net-bugs/Pasted image at 2016_08_14 08_52 PM.png" data-reactid="68"/><div class="image-gallery-thumbnail-label" data-reactid="69"></div></a><a class="image-gallery-thumbnail" data-reactid="70"><img src="/posts/jira-neural-net-bugs/Pasted image at 2016_08_14 10_06 PM (1).png" data-reactid="71"/><div class="image-gallery-thumbnail-label" data-reactid="72"></div></a><a class="image-gallery-thumbnail" data-reactid="73"><img src="/posts/jira-neural-net-bugs/Pasted image at 2016_08_14 10_09 PM (1).png" data-reactid="74"/><div class="image-gallery-thumbnail-label" data-reactid="75"></div></a><a class="image-gallery-thumbnail" data-reactid="76"><img src="/posts/jira-neural-net-bugs/Pasted image at 2016_08_15 07_45 AM (1).png" data-reactid="77"/><div class="image-gallery-thumbnail-label" data-reactid="78"></div></a><a class="image-gallery-thumbnail" data-reactid="79"><img src="/posts/jira-neural-net-bugs/Pasted image at 2016_08_15 07_46 AM.png" data-reactid="80"/><div class="image-gallery-thumbnail-label" data-reactid="81"></div></a><a class="image-gallery-thumbnail" data-reactid="82"><img src="/posts/jira-neural-net-bugs/Pasted image at 2016_08_15 07_47 AM.png" data-reactid="83"/><div class="image-gallery-thumbnail-label" data-reactid="84"></div></a><a class="image-gallery-thumbnail" data-reactid="85"><img src="/posts/jira-neural-net-bugs/Pasted image at 2016_08_15 07_49 AM.png" data-reactid="86"/><div class="image-gallery-thumbnail-label" data-reactid="87"></div></a></div></div></div></section><div class="article" data-reactid="88"><p>Ever wanted to piss off your team by generating plausible (but fake) sounding bug reports? Then look no further! This guide will walk you through exporting all your bugs from JIRA and using <a href="https://github.com/jcjohnson/torch-rnn">torch-rnn</a> to generate nonsense like this:</p>
<p>You may need to swap URLs / field names as needed depending on your exact JIRA setup.</p>
<h2>Step 1: Download all your bugs to your hard drive</h2>
<p>JIRA isn’t too keen on exporting every single bug in one go, so we need to batch download them. Go to the JIRA issues search and search for <code>type = bug</code> to get on all your bugs. Make sure to show the “Description” field (the “Columns” dropdown on the right).</p>
<p>Open up the javascript console for your browser (CTRL + Shift + J in chrome) and paste the blow in to batch download your bugs as excel spreadsheets. You may have to adjust some variables at the top as needed.</p>
<pre><code class="language-js">
<span class="hljs-keyword">var</span> numberOfPages = <span class="hljs-number">6</span>;
<span class="hljs-keyword">var</span> baseUrl = <span class="hljs-string">'http://jira/sr/jira.issueviews:searchrequest-excel-current-fields/temp/SearchRequest.xls?jqlQuery=type+%3D+bug&amp;tempMax=1000'</span>

<span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">downloadURI</span>(<span class="hljs-params">uri</span>) </span>{
    <span class="hljs-keyword">var</span> link = <span class="hljs-built_in">document</span>.createElement(<span class="hljs-string">"a"</span>);
    link.href = uri;
    link.click();
}

downloadURI(baseUrl)

<span class="hljs-keyword">for</span> (<span class="hljs-keyword">var</span> i = <span class="hljs-number">1</span>; i &lt; numberOfPages; i++) {
  (<span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">i</span>) </span>{
    setTimeout(<span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>) </span>{
      <span class="hljs-keyword">var</span> url = baseUrl + <span class="hljs-string">'&amp;pager/start='</span> + (i + <span class="hljs-number">1</span>) + <span class="hljs-string">'001'</span>
      <span class="hljs-built_in">console</span>.log(<span class="hljs-string">'download'</span>, url);
      downloadURI(url)
    }, i * <span class="hljs-number">5000</span>)
  })(i)
}

</code></pre>
<p>This should download a bunch of spreadsheets named <code>JIRA.xls</code>, <code>JIRA (1).xls</code>, …<code>JIRA (n).xls</code> to your Downloads folder.</p>
<h2>Step 2: Merge all bugs into a single CSV file</h2>
<p>We need a giant CSV of all these bugs. There is probably a better way to do this, but I merged them all manually in google docs:</p>
<ul>
<li>Create a google docs spreadsheet, I called mine “JIRA Bug Dump”</li>
<li>Open up as many tabs as you have spreadsheets that got downloaded in Step 1 (trust me on this)</li>
<li>For each tab, go to File -&gt; Import -&gt; Upload and upload <code>JIRA (i).xls</code> (where <code>i</code> is the index of the sheet)</li>
<li>Insert the upload as a new sheet in the document</li>
<li>Once all sheets are inserted, create a new blank sheet (this is your “master” sheet)</li>
<li>Copy in the column headings from one of the sheets</li>
<li>Copy in the bugs from all the other sheets into this blank sheet (watch out for the extra cell JIRA creates at the end of each sheet)</li>
<li>Export this “master” sheet as a CSV, I named mine <code>dump.csv</code></li>
</ul>
<p>If anyone knows a more efficient way to do this, by all means go ahead!</p>
<h2>Step 3: Generate markdown corpus</h2>
<p>I used <code>node</code> to generate a large markdown document from <code>dump.csv</code>. For below to work, make sure to <code>npm i jira2md csvtojson</code>.</p>
<pre><code class="language-js"><span class="hljs-comment">// for markdown generation:</span>
<span class="hljs-keyword">var</span> j2m = <span class="hljs-built_in">require</span>(<span class="hljs-string">'jira2md'</span>);
<span class="hljs-keyword">var</span> fs = <span class="hljs-built_in">require</span>(<span class="hljs-string">'fs'</span>);
<span class="hljs-keyword">var</span> Converter = <span class="hljs-built_in">require</span>(<span class="hljs-string">"csvtojson"</span>).Converter;
<span class="hljs-keyword">var</span> csvConverter = <span class="hljs-keyword">new</span> Converter({
  <span class="hljs-attr">workerNum</span>: <span class="hljs-number">4</span>
});

<span class="hljs-comment">// record_parsed will be emitted each csv row being processed</span>
csvConverter.on(<span class="hljs-string">"record_parsed"</span>, <span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params">jsonObj</span>) </span>{
  <span class="hljs-built_in">console</span>.log(jsonObj[<span class="hljs-string">'Key'</span>], <span class="hljs-string">'parsed'</span>);
});

<span class="hljs-comment">// end_parsed will be emitted once parsing finished</span>
csvConverter.on(<span class="hljs-string">"end_parsed"</span>, <span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params">jsonArray</span>) </span>{

  <span class="hljs-comment">// uncomment below to to test on first 10 items</span>
  <span class="hljs-comment">// var outputMarkdown = jsonArray.slice(0, 10).map(function (row) {</span>
  <span class="hljs-keyword">var</span> outputMarkdown = jsonArray.map(<span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params">row</span>) </span>{
    <span class="hljs-keyword">var</span> r = <span class="hljs-string">''</span>
    r += <span class="hljs-string">'## '</span> + row[<span class="hljs-string">'Key'</span>] + <span class="hljs-string">': '</span> + row[<span class="hljs-string">'Summary'</span>]
    r += <span class="hljs-string">'\n\n'</span>
    <span class="hljs-keyword">var</span> headerKeys = [<span class="hljs-string">'Priority'</span>, <span class="hljs-string">'Component'</span>, <span class="hljs-string">'FixVersion'</span>, <span class="hljs-string">'Reporter'</span>, <span class="hljs-string">'Assignee'</span>]
    headerKeys.forEach(<span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">k</span>) </span>{
      r += <span class="hljs-string">'- **'</span> + k + <span class="hljs-string">':** '</span> + (row[k] ? row[k] : <span class="hljs-string">'*None*'</span>) + <span class="hljs-string">'\n'</span>
    })

    <span class="hljs-keyword">if</span> (row[<span class="hljs-string">"Description"</span>]) {
      r += <span class="hljs-string">'\n'</span> + j2m.to_markdown(row[<span class="hljs-string">"Description"</span>]) + <span class="hljs-string">'\n'</span>
    }

    <span class="hljs-keyword">return</span> r;
  }).join(<span class="hljs-string">'\n-------\n\n'</span>)
  fs.writeFile(<span class="hljs-string">"./bugs.md"</span>, outputMarkdown, <span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params">err</span>) </span>{
    <span class="hljs-keyword">if</span> (err) {
      <span class="hljs-keyword">return</span> <span class="hljs-built_in">console</span>.log(err);
    }

    <span class="hljs-built_in">console</span>.log(<span class="hljs-string">"done"</span>);
  });
});

<span class="hljs-comment">// read from file</span>
fs.createReadStream(<span class="hljs-string">"./dump.csv"</span>).pipe(csvConverter);
</code></pre>
<p>Running this should generate <code>bugs.md</code>, which should be a monster concatenation of every bug ever filed (mine was 4.4MB).</p>
<h2>Step 4: Preprocess, train and sample your RNN</h2>
<p>You need to install <a href="https://github.com/jcjohnson/torch-rnn">torch-rnn</a> for this. You can install straight from that repo, but since I’m on linux I opted for the docker version: <a href="https://github.com/crisbal/docker-torch-rnn">docker-torch-rnn</a>. These instructions assume the docker version of <code>torch-rnn</code>.</p>
<p>Spin up and get a console in the container</p>
<pre><code>docker <span class="hljs-keyword">run</span><span class="bash"> --rm -ti -v `<span class="hljs-built_in">pwd</span>`:/data crisbal/torch-rnn:base bash
</span></code></pre>
<p>Preprocess data. This is a one-time thing.</p>
<pre><code>python scripts/preprocess<span class="hljs-selector-class">.py</span> \
--input_txt /data/bugs<span class="hljs-selector-class">.md</span> \
--output_h5 /data/bugs<span class="hljs-selector-class">.h5</span> \
--output_json /data/bugs<span class="hljs-selector-class">.json</span>
</code></pre>
<p>Train the network. This part took me two days, but the checkpoints saved periodically can still be sampled.</p>
<pre><code><span class="hljs-selector-tag">time</span> <span class="hljs-selector-tag">th</span> train<span class="hljs-selector-class">.lua</span> \
-input_h5 /data/bugs<span class="hljs-selector-class">.h5</span> \
-input_json /data/bugs<span class="hljs-selector-class">.json</span> \
-gpu -<span class="hljs-number">1</span> \
-checkpoint_every <span class="hljs-number">1000</span>
</code></pre>
<p>Sample the network. Change length and checkpoint around to sample from different checkpoints / character lengths. Access the markdown output on your host machine in whatever path the container was started.</p>
<pre><code><span class="hljs-selector-tag">th</span> sample<span class="hljs-selector-class">.lua</span> -gpu -<span class="hljs-number">1</span> -length <span class="hljs-number">18000</span> -checkpoint cv/checkpoint_67900<span class="hljs-selector-class">.t7</span> &gt; /data/rnn_out<span class="hljs-selector-class">.md</span>
</code></pre>
</div><div data-reactid="89"><div style="margin-bottom:0.805rem;font-size:0.805rem;color:gray;" data-reactid="90"><span data-reactid="91"><!-- react-text: 92 -->Tags: <!-- /react-text --><a href="/tags/#generators" data-reactid="93">Generators</a><!-- react-text: 94 --> | <!-- /react-text --><a href="/tags/#neural-networks" data-reactid="95">Neural networks</a></span></div><hr style="background-color:gray;" data-reactid="96"/><div data-reactid="97"><h6 style="margin:0;font-size:0.78616rem;line-height:1.61rem;color:gray;" data-reactid="98">Read this next:</h6><h3 style="margin-top:0;margin-bottom:0.4025rem;" data-reactid="99"><a href="/posts/leaflet-google-maps-experiment/" data-reactid="100"><!-- react-text: 101 --> <!-- /react-text --><!-- react-text: 102 -->Leaflet Google Maps<!-- /react-text --><!-- react-text: 103 --> <!-- /react-text --></a></h3><div data-reactid="104"><iframe style="height: 280px; width: 100%;" src="https://stonelinks.github.io/leaflet-google-maps-experiment/"></iframe>
<p>Ever wanted to use google imagery inside of a leaflet map? This is just a small example of a google maps imagery / base layers hosted inside of a leaflet map. Check out where the magic happens on github: <a href="https://github.com/Stonelinks/leaflet-google-maps-experiment/blob/master/src/leaflet-google.js">here</a>.</p>
</div><hr style="margin-top:1.61rem;background-color:gray;" data-reactid="105"/></div><p style="margin-bottom:1.61rem;" data-reactid="106"><a href="/about/" data-reactid="107"><img src="/author.png" alt="Lucas Doyle" style="float:left;margin-top:-0.805rem;margin-bottom:0;margin-right:0.4025rem;width:3.22rem;height:3.22rem;border-radius:50%;border:1px gray solid;" data-reactid="108"/></a><span style="margin-top:1.61rem;" data-reactid="109"><!-- react-text: 110 -->Written by <!-- /react-text --><a href="/about/" data-reactid="111">Lucas Doyle</a><!-- react-text: 112 --><!-- /react-text --></span></p></div></div><span style="display:block;clear:both;" data-reactid="113"> </span></div></div><script src="/bundle.js?t=1540440902124"></script></body></html>