<!DOCTYPE html><html lang="en"><head><meta charSet="utf-8"/><meta name="viewport" content="width=device-width, initial-scale=1"/><link rel="preload" href="/_next/static/media/7aa35bcef8fce17b-s.p.woff2" as="font" crossorigin="" type="font/woff2"/><link rel="preload" as="image" href="/icon.png" fetchPriority="high"/><link rel="stylesheet" href="/_next/static/css/4561a6c03121424a.css" data-precedence="next"/><link rel="stylesheet" href="/_next/static/css/c857412b86ee8a27.css" data-precedence="next"/><link rel="preload" as="script" fetchPriority="low" href="/_next/static/chunks/webpack-956f23d814df533a.js"/><script src="/_next/static/chunks/fd9d1056-be48aeae6e94b8d1.js" async=""></script><script src="/_next/static/chunks/23-093443f120d56e9e.js" async=""></script><script src="/_next/static/chunks/main-app-52dbf74aa2e08594.js" async=""></script><script src="/_next/static/chunks/30-05a526192e143cc7.js" async=""></script><script src="/_next/static/chunks/app/posts/%5Bslug%5D/page-ec7b6e3c69ebdd52.js" async=""></script><title>Stonelinks</title><meta name="description" content="Personal website of Lucas Doyle"/><link rel="icon" href="/favicon.ico" type="image/x-icon" sizes="16x16"/><meta name="next-size-adjust"/><script src="/_next/static/chunks/polyfills-78c92fac7aa8fdd8.js" noModule=""></script></head><body class="__className_c99d77"><div class="page_main__nw1Wk"><div class="page_header__oRW75"><img alt="Logo" fetchPriority="high" width="100" height="100" decoding="async" data-nimg="1" style="color:transparent" src="/icon.png"/><div class="page_title-nav-container__yDV6g"><h1 class="page_hero-title__ISM_Q">Stonelinks</h1><ul class="page_nav-list__BIYWj"><li><a href="/">Home</a></li><li><a href="/posts/">Posts</a></li><li><a href="/projects/">Projects</a></li><li><a href="/luke/">About</a></li></ul></div></div><article class="post_post__6EpyE"><h1 class="post_title__Rgtqi">Jekyll i18n</h1><p class="common_date__JU5vN">July 31, 2014</p><div class="TagList_tagList__ukBDA"><a class="TagList_tag__225v4" href="/tags/web%20development/">web development</a><a class="TagList_tag__225v4" href="/tags/ruby/">ruby</a><a class="TagList_tag__225v4" href="/tags/jekyll/">jekyll</a><a class="TagList_tag__225v4" href="/tags/i18n/">i18n</a></div><div class="post_content__KF6Q6"><p><a href="https://github.com/Stonelinks/jekyll-gettext-plugin">https://github.com/Stonelinks/jekyll-gettext-plugin</a></p>
<p>As the friendly neighborhood web developer at MUJIN, one of my responsibilities is <a href="http://mujin.co.jp/">our company's website</a>. I made this site mostly by myself using <a href="http://jekyllrb.com/">jekyll</a>, the static website generator that github uses for github pages by default.</p>
<p>Jekyll is pretty awesome, but doesn't support internationalization which we obviously need as a Japanese company. I got something really simple working with <a href="https://github.com/screeninteraction/jekyll-multiple-languages-plugin">jekyll-multiple-languages-plugin</a>, but I wasn't happy with it. The translation index had to be manually kept which was a giant pain (especially since non-technical people edit content on the site).</p>
<p>As a long time django user, I really like the way it handles <a href="https://docs.djangoproject.com/en/dev/topics/i18n/">internationalization</a>, namely the fact that the translation index was automatically updated as people edited content in the standard gettext <code>.po</code> file format.</p>
<p>I endeavored to create such a solution for jekyll using ruby, something I was completely unfamiliar with. I learned some ruby basics, how <a href="https://rvm.io/">rvm</a> and <a href="https://rubygems.org/">RubyGems</a> work, and finally leveraged the existing libraries <a href="https://github.com/grosser/get_pomo">get_pomo</a> and <a href="https://github.com/grosser/fast_gettext">fast_gettext</a> which did a lot of the heavy lifting for me. You can read more about how to actually use my library over on <a href="https://github.com/Stonelinks/jekyll-gettext-plugin">github</a>.</p>
<p>I rounded out our internationalization solution by using the <a href="http://www.w3.org/Protocols/rfc2616/rfc2616-sec14.html#sec14.4">Accept-Language</a> header to redirect users to the website in their browser's language (but still be able to override it by going to specific language endpoints). Here is the section from <code>.htaccess</code>:</p>
<pre><code>RewriteEngine On

RewriteCond %{HTTP:Accept-Language} ^en.*$ [NC]
RewriteCond %{REQUEST_URI} ^/$ [NC]
RewriteCond %{QUERY_STRING} !(^q\=) [NC]
RewriteRule ^(.*)$ /en/ [L,R=302]

RewriteCond %{REQUEST_URI} ^/$ [NC]
RewriteCond %{QUERY_STRING} !(^q\=) [NC]
RewriteRule ^(.*)$ /ja [L,R=302]

</code></pre></div></article><footer>© Lucas Doyle <!-- -->2025</footer></div><script src="/_next/static/chunks/webpack-956f23d814df533a.js" async=""></script><script>(self.__next_f=self.__next_f||[]).push([0]);self.__next_f.push([2,null])</script><script>self.__next_f.push([1,"1:HL[\"/_next/static/media/7aa35bcef8fce17b-s.p.woff2\",\"font\",{\"crossOrigin\":\"\",\"type\":\"font/woff2\"}]\n2:HL[\"/_next/static/css/4561a6c03121424a.css\",\"style\"]\n3:HL[\"/_next/static/css/c857412b86ee8a27.css\",\"style\"]\n"])</script><script>self.__next_f.push([1,"4:I[5751,[],\"\"]\n7:I[9275,[],\"\"]\n9:I[1343,[],\"\"]\na:I[8173,[\"30\",\"static/chunks/30-05a526192e143cc7.js\",\"333\",\"static/chunks/app/posts/%5Bslug%5D/page-ec7b6e3c69ebdd52.js\"],\"Image\"]\nb:I[231,[\"30\",\"static/chunks/30-05a526192e143cc7.js\",\"333\",\"static/chunks/app/posts/%5Bslug%5D/page-ec7b6e3c69ebdd52.js\"],\"\"]\nd:I[6130,[],\"\"]\n8:[\"slug\",\"2014-07-31-jekyll-gettext-plugin\",\"d\"]\ne:[]\n"])</script><script>self.__next_f.push([1,"0:[[[\"$\",\"link\",\"0\",{\"rel\":\"stylesheet\",\"href\":\"/_next/static/css/4561a6c03121424a.css\",\"precedence\":\"next\",\"crossOrigin\":\"$undefined\"}]],[\"$\",\"$L4\",null,{\"buildId\":\"o_NpWiwkf0eVZo-xacprK\",\"assetPrefix\":\"\",\"initialCanonicalUrl\":\"/posts/2014-07-31-jekyll-gettext-plugin/\",\"initialTree\":[\"\",{\"children\":[\"posts\",{\"children\":[[\"slug\",\"2014-07-31-jekyll-gettext-plugin\",\"d\"],{\"children\":[\"__PAGE__?{\\\"slug\\\":\\\"2014-07-31-jekyll-gettext-plugin\\\"}\",{}]}]}]},\"$undefined\",\"$undefined\",true],\"initialSeedData\":[\"\",{\"children\":[\"posts\",{\"children\":[[\"slug\",\"2014-07-31-jekyll-gettext-plugin\",\"d\"],{\"children\":[\"__PAGE__\",{},[[\"$L5\",\"$L6\"],null],null]},[\"$\",\"$L7\",null,{\"parallelRouterKey\":\"children\",\"segmentPath\":[\"children\",\"posts\",\"children\",\"$8\",\"children\"],\"error\":\"$undefined\",\"errorStyles\":\"$undefined\",\"errorScripts\":\"$undefined\",\"template\":[\"$\",\"$L9\",null,{}],\"templateStyles\":\"$undefined\",\"templateScripts\":\"$undefined\",\"notFound\":\"$undefined\",\"notFoundStyles\":\"$undefined\",\"styles\":[[\"$\",\"link\",\"0\",{\"rel\":\"stylesheet\",\"href\":\"/_next/static/css/c857412b86ee8a27.css\",\"precedence\":\"next\",\"crossOrigin\":\"$undefined\"}]]}],null]},[\"$\",\"$L7\",null,{\"parallelRouterKey\":\"children\",\"segmentPath\":[\"children\",\"posts\",\"children\"],\"error\":\"$undefined\",\"errorStyles\":\"$undefined\",\"errorScripts\":\"$undefined\",\"template\":[\"$\",\"$L9\",null,{}],\"templateStyles\":\"$undefined\",\"templateScripts\":\"$undefined\",\"notFound\":\"$undefined\",\"notFoundStyles\":\"$undefined\",\"styles\":null}],null]},[[\"$\",\"html\",null,{\"lang\":\"en\",\"children\":[\"$\",\"body\",null,{\"className\":\"__className_c99d77\",\"children\":[\"$\",\"$L7\",null,{\"parallelRouterKey\":\"children\",\"segmentPath\":[\"children\"],\"error\":\"$undefined\",\"errorStyles\":\"$undefined\",\"errorScripts\":\"$undefined\",\"template\":[\"$\",\"$L9\",null,{}],\"templateStyles\":\"$undefined\",\"templateScripts\":\"$undefined\",\"notFound\":[\"$\",\"div\",null,{\"className\":\"page_main__nw1Wk\",\"children\":[[\"$\",\"div\",null,{\"className\":\"page_header__oRW75\",\"children\":[[\"$\",\"$La\",null,{\"src\":\"/icon.png\",\"alt\":\"Logo\",\"width\":100,\"height\":100,\"priority\":true}],[\"$\",\"div\",null,{\"className\":\"page_title-nav-container__yDV6g\",\"children\":[[\"$\",\"h1\",null,{\"className\":\"page_hero-title__ISM_Q\",\"children\":\"Stonelinks\"}],[\"$\",\"ul\",null,{\"className\":\"page_nav-list__BIYWj\",\"children\":[[\"$\",\"li\",null,{\"children\":[\"$\",\"$Lb\",null,{\"href\":\"/\",\"children\":\"Home\"}]}],[\"$\",\"li\",null,{\"children\":[\"$\",\"$Lb\",null,{\"href\":\"/posts\",\"children\":\"Posts\"}]}],[\"$\",\"li\",null,{\"children\":[\"$\",\"$Lb\",null,{\"href\":\"/projects\",\"children\":\"Projects\"}]}],[\"$\",\"li\",null,{\"children\":[\"$\",\"$Lb\",null,{\"href\":\"/luke\",\"children\":\"About\"}]}]]}]]}]]}],[[\"$\",\"h1\",null,{\"children\":\"404 - Page Not Found\"}],[\"$\",\"p\",null,{\"children\":\"Sorry, that page does not exist.\"}]],[\"$\",\"footer\",null,{\"children\":[\"© Lucas Doyle \",2025]}]]}],\"notFoundStyles\":[[\"$\",\"link\",\"0\",{\"rel\":\"stylesheet\",\"href\":\"/_next/static/css/c857412b86ee8a27.css\",\"precedence\":\"next\",\"crossOrigin\":\"$undefined\"}]],\"styles\":null}]}]}],null],null],\"couldBeIntercepted\":false,\"initialHead\":[null,\"$Lc\"],\"globalErrorComponent\":\"$d\",\"missingSlots\":\"$We\"}]]\n"])</script><script>self.__next_f.push([1,"f:T984,"])</script><script>self.__next_f.push([1,"\u003cp\u003e\u003ca href=\"https://github.com/Stonelinks/jekyll-gettext-plugin\"\u003ehttps://github.com/Stonelinks/jekyll-gettext-plugin\u003c/a\u003e\u003c/p\u003e\n\u003cp\u003eAs the friendly neighborhood web developer at MUJIN, one of my responsibilities is \u003ca href=\"http://mujin.co.jp/\"\u003eour company's website\u003c/a\u003e. I made this site mostly by myself using \u003ca href=\"http://jekyllrb.com/\"\u003ejekyll\u003c/a\u003e, the static website generator that github uses for github pages by default.\u003c/p\u003e\n\u003cp\u003eJekyll is pretty awesome, but doesn't support internationalization which we obviously need as a Japanese company. I got something really simple working with \u003ca href=\"https://github.com/screeninteraction/jekyll-multiple-languages-plugin\"\u003ejekyll-multiple-languages-plugin\u003c/a\u003e, but I wasn't happy with it. The translation index had to be manually kept which was a giant pain (especially since non-technical people edit content on the site).\u003c/p\u003e\n\u003cp\u003eAs a long time django user, I really like the way it handles \u003ca href=\"https://docs.djangoproject.com/en/dev/topics/i18n/\"\u003einternationalization\u003c/a\u003e, namely the fact that the translation index was automatically updated as people edited content in the standard gettext \u003ccode\u003e.po\u003c/code\u003e file format.\u003c/p\u003e\n\u003cp\u003eI endeavored to create such a solution for jekyll using ruby, something I was completely unfamiliar with. I learned some ruby basics, how \u003ca href=\"https://rvm.io/\"\u003ervm\u003c/a\u003e and \u003ca href=\"https://rubygems.org/\"\u003eRubyGems\u003c/a\u003e work, and finally leveraged the existing libraries \u003ca href=\"https://github.com/grosser/get_pomo\"\u003eget_pomo\u003c/a\u003e and \u003ca href=\"https://github.com/grosser/fast_gettext\"\u003efast_gettext\u003c/a\u003e which did a lot of the heavy lifting for me. You can read more about how to actually use my library over on \u003ca href=\"https://github.com/Stonelinks/jekyll-gettext-plugin\"\u003egithub\u003c/a\u003e.\u003c/p\u003e\n\u003cp\u003eI rounded out our internationalization solution by using the \u003ca href=\"http://www.w3.org/Protocols/rfc2616/rfc2616-sec14.html#sec14.4\"\u003eAccept-Language\u003c/a\u003e header to redirect users to the website in their browser's language (but still be able to override it by going to specific language endpoints). Here is the section from \u003ccode\u003e.htaccess\u003c/code\u003e:\u003c/p\u003e\n\u003cpre\u003e\u003ccode\u003eRewriteEngine On\n\nRewriteCond %{HTTP:Accept-Language} ^en.*$ [NC]\nRewriteCond %{REQUEST_URI} ^/$ [NC]\nRewriteCond %{QUERY_STRING} !(^q\\=) [NC]\nRewriteRule ^(.*)$ /en/ [L,R=302]\n\nRewriteCond %{REQUEST_URI} ^/$ [NC]\nRewriteCond %{QUERY_STRING} !(^q\\=) [NC]\nRewriteRule ^(.*)$ /ja [L,R=302]\n\n\u003c/code\u003e\u003c/pre\u003e"])</script><script>self.__next_f.push([1,"6:[\"$\",\"div\",null,{\"className\":\"page_main__nw1Wk\",\"children\":[[\"$\",\"div\",null,{\"className\":\"page_header__oRW75\",\"children\":[[\"$\",\"$La\",null,{\"src\":\"/icon.png\",\"alt\":\"Logo\",\"width\":100,\"height\":100,\"priority\":true}],[\"$\",\"div\",null,{\"className\":\"page_title-nav-container__yDV6g\",\"children\":[[\"$\",\"h1\",null,{\"className\":\"page_hero-title__ISM_Q\",\"children\":\"Stonelinks\"}],[\"$\",\"ul\",null,{\"className\":\"page_nav-list__BIYWj\",\"children\":[[\"$\",\"li\",null,{\"children\":[\"$\",\"$Lb\",null,{\"href\":\"/\",\"children\":\"Home\"}]}],[\"$\",\"li\",null,{\"children\":[\"$\",\"$Lb\",null,{\"href\":\"/posts\",\"children\":\"Posts\"}]}],[\"$\",\"li\",null,{\"children\":[\"$\",\"$Lb\",null,{\"href\":\"/projects\",\"children\":\"Projects\"}]}],[\"$\",\"li\",null,{\"children\":[\"$\",\"$Lb\",null,{\"href\":\"/luke\",\"children\":\"About\"}]}]]}]]}]]}],[\"$\",\"article\",null,{\"className\":\"post_post__6EpyE\",\"children\":[[\"$\",\"h1\",null,{\"className\":\"post_title__Rgtqi\",\"children\":\"Jekyll i18n\"}],[\"$\",\"p\",null,{\"className\":\"common_date__JU5vN\",\"children\":\"July 31, 2014\"}],\"$undefined\",[\"$\",\"div\",null,{\"className\":\"TagList_tagList__ukBDA\",\"children\":[[\"$\",\"$Lb\",\"0\",{\"className\":\"TagList_tag__225v4\",\"href\":\"/tags/web%20development\",\"children\":\"web development\"}],[\"$\",\"$Lb\",\"1\",{\"className\":\"TagList_tag__225v4\",\"href\":\"/tags/ruby\",\"children\":\"ruby\"}],[\"$\",\"$Lb\",\"2\",{\"className\":\"TagList_tag__225v4\",\"href\":\"/tags/jekyll\",\"children\":\"jekyll\"}],[\"$\",\"$Lb\",\"3\",{\"className\":\"TagList_tag__225v4\",\"href\":\"/tags/i18n\",\"children\":\"i18n\"}]]}],\"$undefined\",[\"$\",\"div\",null,{\"className\":\"post_content__KF6Q6\",\"dangerouslySetInnerHTML\":{\"__html\":\"$f\"}}]]}],[\"$\",\"footer\",null,{\"children\":[\"© Lucas Doyle \",2025]}]]}]\nc:[[\"$\",\"meta\",\"0\",{\"name\":\"viewport\",\"content\":\"width=device-width, initial-scale=1\"}],[\"$\",\"meta\",\"1\",{\"charSet\":\"utf-8\"}],[\"$\",\"title\",\"2\",{\"children\":\"Stonelinks\"}],[\"$\",\"meta\",\"3\",{\"name\":\"description\",\"content\":\"Personal website of Lucas Doyle\"}],[\"$\",\"link\",\"4\",{\"rel\":\"icon\",\"href\":\"/favicon.ico\",\"type\":\"image/x-icon\",\"sizes\":\"16x16\"}],[\"$\",\"meta\",\"5\",{\"name\":\"next-size-adjust\"}]]\n5:null\n"])</script></body></html>