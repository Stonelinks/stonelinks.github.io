3:I[9275,[],""]
5:I[1343,[],""]
6:I[8173,["994","static/chunks/994-e0384b19511b091b.js","333","static/chunks/app/posts/%5Bslug%5D/page-c6567c6c1ae134f3.js"],"Image"]
7:I[231,["994","static/chunks/994-e0384b19511b091b.js","333","static/chunks/app/posts/%5Bslug%5D/page-c6567c6c1ae134f3.js"],""]
4:["slug","2014-07-31-jekyll-gettext-plugin","d"]
0:["rIbg1UnKYfj0oUqMH-l6m",[[["",{"children":["posts",{"children":[["slug","2014-07-31-jekyll-gettext-plugin","d"],{"children":["__PAGE__?{\"slug\":\"2014-07-31-jekyll-gettext-plugin\"}",{}]}]}]},"$undefined","$undefined",true],["",{"children":["posts",{"children":[["slug","2014-07-31-jekyll-gettext-plugin","d"],{"children":["__PAGE__",{},[["$L1","$L2"],null],null]},["$","$L3",null,{"parallelRouterKey":"children","segmentPath":["children","posts","children","$4","children"],"error":"$undefined","errorStyles":"$undefined","errorScripts":"$undefined","template":["$","$L5",null,{}],"templateStyles":"$undefined","templateScripts":"$undefined","notFound":"$undefined","notFoundStyles":"$undefined","styles":[["$","link","0",{"rel":"stylesheet","href":"/_next/static/css/7a6e15ce7603e944.css","precedence":"next","crossOrigin":"$undefined"}]]}],null]},["$","$L3",null,{"parallelRouterKey":"children","segmentPath":["children","posts","children"],"error":"$undefined","errorStyles":"$undefined","errorScripts":"$undefined","template":["$","$L5",null,{}],"templateStyles":"$undefined","templateScripts":"$undefined","notFound":"$undefined","notFoundStyles":"$undefined","styles":null}],null]},[["$","html",null,{"lang":"en","children":["$","body",null,{"children":["$","$L3",null,{"parallelRouterKey":"children","segmentPath":["children"],"error":"$undefined","errorStyles":"$undefined","errorScripts":"$undefined","template":["$","$L5",null,{}],"templateStyles":"$undefined","templateScripts":"$undefined","notFound":["$","div",null,{"className":"flex flex-col items-center min-h-screen p-6 pt-0 ","children":[["$","div",null,{"className":"flex flex-col items-center mt-6 mb-2 md:mb-8 md:flex-row md:items-center md:justify-start","children":[["$","div",null,{"className":"mb-4 md:mb-0 md:mr-4 flex justify-center","children":["$","$L6",null,{"src":"/icon.png","alt":"Logo","width":100,"height":100,"priority":true}]}],["$","div",null,{"className":"flex flex-col items-center md:items-start","children":[["$","h1",null,{"className":"text-4xl md:text-6xl font-serif mb-2","children":"Stonelinks"}],["$","ul",null,{"className":"flex list-none gap-4","children":[["$","li",null,{"children":["$","$L7",null,{"href":"/","children":"Home"}]}],["$","li",null,{"children":["$","$L7",null,{"href":"/posts","children":"Posts"}]}],["$","li",null,{"children":["$","$L7",null,{"href":"/projects","children":"Projects"}]}],["$","li",null,{"children":["$","$L7",null,{"href":"/luke","children":"About"}]}]]}]]}]]}],["$","div",null,{"className":"max-w-3xl","children":[[["$","h1",null,{"className":"mb-2","children":"404 - Page Not Found"}],["$","p",null,{"className":"mb-4 text-gray-600","children":"Sorry, that page does not exist."}]],["$","footer",null,{"children":[["$","hr",null,{"className":"py-4"}],"© ",["$","$L7",null,{"href":"/luke","children":"Lucas Doyle"}]," ",2025]}]]}]]}],"notFoundStyles":[["$","link","0",{"rel":"stylesheet","href":"/_next/static/css/7a6e15ce7603e944.css","precedence":"next","crossOrigin":"$undefined"}]],"styles":null}]}]}],null],null],[[["$","link","0",{"rel":"stylesheet","href":"/_next/static/css/0c1cbe041aef36e6.css","precedence":"next","crossOrigin":"$undefined"}]],[null,"$L8"]]]]]
9:T984,<p><a href="https://github.com/Stonelinks/jekyll-gettext-plugin">https://github.com/Stonelinks/jekyll-gettext-plugin</a></p>
<p>As the friendly neighborhood web developer at MUJIN, one of my responsibilities is <a href="http://mujin.co.jp/">our company's website</a>. I made this site mostly by myself using <a href="http://jekyllrb.com/">jekyll</a>, the static website generator that github uses for github pages by default.</p>
<p>Jekyll is pretty awesome, but doesn't support internationalization which we obviously need as a Japanese company. I got something really simple working with <a href="https://github.com/screeninteraction/jekyll-multiple-languages-plugin">jekyll-multiple-languages-plugin</a>, but I wasn't happy with it. The translation index had to be manually kept which was a giant pain (especially since non-technical people edit content on the site).</p>
<p>As a long time django user, I really like the way it handles <a href="https://docs.djangoproject.com/en/dev/topics/i18n/">internationalization</a>, namely the fact that the translation index was automatically updated as people edited content in the standard gettext <code>.po</code> file format.</p>
<p>I endeavored to create such a solution for jekyll using ruby, something I was completely unfamiliar with. I learned some ruby basics, how <a href="https://rvm.io/">rvm</a> and <a href="https://rubygems.org/">RubyGems</a> work, and finally leveraged the existing libraries <a href="https://github.com/grosser/get_pomo">get_pomo</a> and <a href="https://github.com/grosser/fast_gettext">fast_gettext</a> which did a lot of the heavy lifting for me. You can read more about how to actually use my library over on <a href="https://github.com/Stonelinks/jekyll-gettext-plugin">github</a>.</p>
<p>I rounded out our internationalization solution by using the <a href="http://www.w3.org/Protocols/rfc2616/rfc2616-sec14.html#sec14.4">Accept-Language</a> header to redirect users to the website in their browser's language (but still be able to override it by going to specific language endpoints). Here is the section from <code>.htaccess</code>:</p>
<pre><code>RewriteEngine On

RewriteCond %{HTTP:Accept-Language} ^en.*$ [NC]
RewriteCond %{REQUEST_URI} ^/$ [NC]
RewriteCond %{QUERY_STRING} !(^q\=) [NC]
RewriteRule ^(.*)$ /en/ [L,R=302]

RewriteCond %{REQUEST_URI} ^/$ [NC]
RewriteCond %{QUERY_STRING} !(^q\=) [NC]
RewriteRule ^(.*)$ /ja [L,R=302]

</code></pre>2:["$","div",null,{"className":"flex flex-col items-center min-h-screen p-6 pt-0 ","children":[["$","div",null,{"className":"flex flex-col items-center mt-6 mb-2 md:mb-8 md:flex-row md:items-center md:justify-start","children":[["$","div",null,{"className":"mb-4 md:mb-0 md:mr-4 flex justify-center","children":["$","$L6",null,{"src":"/icon.png","alt":"Logo","width":100,"height":100,"priority":true}]}],["$","div",null,{"className":"flex flex-col items-center md:items-start","children":[["$","h1",null,{"className":"text-4xl md:text-6xl font-serif mb-2","children":"Stonelinks"}],["$","ul",null,{"className":"flex list-none gap-4","children":[["$","li",null,{"children":["$","$L7",null,{"href":"/","children":"Home"}]}],["$","li",null,{"children":["$","$L7",null,{"href":"/posts","children":"Posts"}]}],["$","li",null,{"children":["$","$L7",null,{"href":"/projects","children":"Projects"}]}],["$","li",null,{"children":["$","$L7",null,{"href":"/luke","children":"About"}]}]]}]]}]]}],["$","div",null,{"className":"max-w-3xl","children":[["$","article",null,{"className":"p-5","children":[["$","h1",null,{"children":"Jekyll i18n"}],["$","p",null,{"className":"text-sm text-gray-500 mt-0 mb-4","children":"July 31, 2014"}],["$","div",null,{"className":"flex flex-wrap gap-2 mb-6","children":[["$","$L7","0",{"className":"bg-gray-200 hover:bg-gray-300 text-gray-700 text-sm font-medium rounded px-2.5 py-0.5","href":"/tags/web%20development","children":"web development"}],["$","$L7","1",{"className":"bg-gray-200 hover:bg-gray-300 text-gray-700 text-sm font-medium rounded px-2.5 py-0.5","href":"/tags/ruby","children":"ruby"}],["$","$L7","2",{"className":"bg-gray-200 hover:bg-gray-300 text-gray-700 text-sm font-medium rounded px-2.5 py-0.5","href":"/tags/jekyll","children":"jekyll"}],["$","$L7","3",{"className":"bg-gray-200 hover:bg-gray-300 text-gray-700 text-sm font-medium rounded px-2.5 py-0.5","href":"/tags/i18n","children":"i18n"}]]}],"$undefined","$undefined",["$","div",null,{"className":"prose max-w-none mt-4","dangerouslySetInnerHTML":{"__html":"$9"}}]]}],["$","footer",null,{"children":[["$","hr",null,{"className":"py-4"}],"© ",["$","$L7",null,{"href":"/luke","children":"Lucas Doyle"}]," ",2025]}]]}]]}]
8:[["$","meta","0",{"name":"viewport","content":"width=device-width, initial-scale=1"}],["$","meta","1",{"name":"theme-color","content":"#ffffff"}],["$","meta","2",{"charSet":"utf-8"}],["$","title","3",{"children":"Jekyll i18n - Lucas Doyle - Personal Website | Stonelinks"}],["$","meta","4",{"name":"description","content":"Read this post by Lucas Doyle"}],["$","meta","5",{"property":"og:title","content":"Jekyll i18n"}],["$","meta","6",{"property":"og:description","content":"Read this post by Lucas Doyle"}],["$","meta","7",{"name":"twitter:card","content":"summary"}],["$","meta","8",{"name":"twitter:title","content":"Jekyll i18n"}],["$","meta","9",{"name":"twitter:description","content":"Read this post by Lucas Doyle"}],["$","link","10",{"rel":"icon","href":"/favicon.ico","type":"image/x-icon","sizes":"16x16"}]]
1:null
