<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <title>Stonelinks
    </title>
    <link rel="icon" href="/images/favicon.ico" type="image/x-icon">
    <link rel="shortcut icon" href="/images/favicon.ico" type="image/x-icon">
    <link rel="stylesheet" href="/style/main.css">
  </head>
  <body>
    <div class="chrome-wrapper">
      <div class="chrome-wrapper-inner">
        <div class="chrome-container">
          <div class="masthead clearfix"><a href="/">
              <div class="masthead-logo"><img src="/images/logos/logo-200.png"></div>
              <h1 class="masthead-brand">Stonelinks
              </h1></a>
            <p class="masthead-tagline">Lucas Doyle's Website
            </p>
            <nav>
              <ul class="nav masthead-nav">
                <li><a href="/blog.html">Blog</a></li>
                <li><a href="/luke.html">About</a></li>
                <li><a href="/projects.html">Projects</a></li>
              </ul>
            </nav>
          </div>
          <div id="preloaded-images"></div>
          <div class="container">
            <div class="box-row">
              <div class="row tag-row">
                <div class="box">
                  <div class="col-lg-12">
                    <h4><span>Showing all posts in</span><span class="label label-primary tag">ruby</span></h4>
                    <p><a href="/tag/net%20neutrality/1/"><span class="label label-primary tag">net neutrality</span></a><a href="/tag/datasets/1/"><span class="label label-primary tag">datasets</span></a><a href="/tag/robots/1/"><span class="label label-primary tag">robots</span></a><a href="/tag/computer%20vision/1/"><span class="label label-primary tag">computer vision</span></a><a href="/tag/python/1/"><span class="label label-primary tag">python</span></a><a href="/tag/arduino/1/"><span class="label label-primary tag">arduino</span></a><a href="/tag/javascript/1/"><span class="label label-primary tag">javascript</span></a><a href="/tag/web%20development/1/"><span class="label label-primary tag">web development</span></a><a href="/tag/telemetry/1/"><span class="label label-primary tag">telemetry</span></a><a href="/tag/harvard/1/"><span class="label label-primary tag">harvard</span></a><a href="/tag/astrophysics/1/"><span class="label label-primary tag">astrophysics</span></a><a href="/tag/documentation/1/"><span class="label label-primary tag">documentation</span></a><a href="/tag/algorithms/1/"><span class="label label-primary tag">algorithms</span></a><a href="/tag/C++/1/"><span class="label label-primary tag">C++</span></a><a href="/tag/science/1/"><span class="label label-primary tag">science</span></a><a href="/tag/labview/1/"><span class="label label-primary tag">labview</span></a><a href="/tag/jekyll/1/"><span class="label label-primary tag">jekyll</span></a><a href="/tag/i18n/1/"><span class="label label-primary tag">i18n</span></a><a href="/tag/airplane/1/"><span class="label label-primary tag">airplane</span></a><a href="/tag/drones/1/"><span class="label label-primary tag">drones</span></a><a href="/tag/latex/1/"><span class="label label-primary tag">latex</span></a><a href="/tag/hacks/1/"><span class="label label-primary tag">hacks</span></a><a href="/tag/webgl/1/"><span class="label label-primary tag">webgl</span></a><a href="/tag/manufacturing/1/"><span class="label label-primary tag">manufacturing</span></a><a href="/tag/robotics/1/"><span class="label label-primary tag">robotics</span></a><a href="/tag/systems/1/"><span class="label label-primary tag">systems</span></a>
                    </p>
                  </div>
                </div>
              </div>
              <div class="row">
                <div class="box">
                  <div class="col-lg-12"><a href="/posts/jekyll-gettext-plugin.html">
                      <h1 class="box-title">Jekyll i18n</h1></a>
                    <div class="byline">
                      <p>Published in<a href="/tag/web%20development/1/"><span class="label label-primary tag">web development</span></a><a href="/tag/ruby/1/"><span class="label label-primary tag">ruby</span></a><a href="/tag/jekyll/1/"><span class="label label-primary tag">jekyll</span></a><a href="/tag/i18n/1/"><span class="label label-primary tag">i18n</span></a>
                      </p>
                      <p>August 01, 2014 by&nbsp;<a href="/luke.html">Lucas Doyle</a>
                      </p>
                    </div>
                    <div class="external-links"><div class="gh-container"><br>  <a href="https://github.com/Stonelinks/jekyll-gettext-plugin" class="btn btn-primary btn-lg btn-block">github.com/Stonelinks/jekyll-gettext</a><br></div>

<p>As the friendly neighborhood web developer at <span class="caps">MUJIN</span>, one of my responsibilities is <a href="http://mujin.co.jp/">our company’s website</a>. I made this site mostly by myself using <a href="http://jekyllrb.com/">jekyll</a>, the static website generator that github uses for github pages by&nbsp;default.</p>
<p>Jekyll is pretty awesome, but doesn’t support internationalization which we obviously need as a Japanese company. I got something really simple working with <a href="https://github.com/screeninteraction/jekyll-multiple-languages-plugin">jekyll-multiple-languages-plugin</a>, I wasn’t happy with it. The translation index had to be manually kept which was a giant pain (especially since non-technical people edit content on the&nbsp;site).</p>
<p>As a long time django user, I really like the way it handles <a href="https://docs.djangoproject.com/en/dev/topics/i18n/">internationalization</a>, namely the fact that the translation index was automatically updated as people edited content in the standard gettext <code>.po</code> file format.</p>
<p>I endeavored to create such a solution for jekyll using ruby, something I was completely unfamiliar with. I learned some ruby basics, how <a href="https://rvm.io/">rvm</a> and <a href="https://rubygems.org/">RubyGems</a> work, and finally leveraged the existing libraries <a href="https://github.com/grosser/get_pomo">get_pomo</a> and <a href="https://github.com/grosser/fast_gettext">fast_gettext</a> which did a lot of the heavy lifting for me. You can read more about how to actually use my library over on <a href="https://github.com/Stonelinks/jekyll-gettext-plugin">github</a>.</p>
<p>I rounded out our internationalization solution by using the <a href="http://www.w3.org/Protocols/rfc2616/rfc2616-sec14.html#sec14.4">Accept-Language</a> header to redirect users to the website in their browser’s language (but still be able to override it by going to specific language endpoints). Here is the section from  <code>.htaccess</code>:</p>
<pre><code>RewriteEngine On

RewriteCond %{HTTP:Accept-Language} ^en.*$ [NC]
RewriteCond %{REQUEST_URI} ^/$ [NC]
RewriteCond %{QUERY_STRING} !(^q\=) [NC]
RewriteRule ^(.*)$ /en/ [L,R=302]

RewriteCond %{REQUEST_URI} ^/$ [NC]
RewriteCond %{QUERY_STRING} !(^q\=) [NC]
RewriteRule ^(.*)$ /ja [L,R=302]
</code></pre></div>
                  </div>
                </div>
              </div>
              <div class="row">
                <div class="box">
                  <div class="col-lg-12 footer-nav"><a href="/archive.html">
                      <h4 class="pull-left">« Archives</h4></a>
                  </div>
                </div>
              </div>
            </div>
          </div>
          <div class="mastfoot"><a href="https://www.facebook.com/stonelinks" target="_blank" class="social"><i class="fa fa-facebook"></i></a><a href="https://github.com/Stonelinks" target="_blank" class="social"><i class="fa fa-github"></i></a><a href="https://twitter.com/#!/Stonelinks" target="_blank" class="social"><i class="fa fa-twitter"></i></a><a href="https://plus.google.com/116178490514652721625/posts" target="_blank" class="social"><i class="fa fa-google-plus"></i></a><a href="http://www.linkedin.com/pub/lucas-doyle/25/550/169" target="_blank" class="social"><i class="fa fa-linkedin"></i></a><a href="http://www.youtube.com/user/RealStonelinks" target="_blank" class="social"><i class="fa fa-youtube"></i></a><a href="mailto:lucas.p.doyle@gmail.com?Subject=Hello" target="_top">Contact me</a>
          </div>
        </div>
      </div>
    </div>
    <script src="/node_modules/jquery/dist/jquery.js"></script>
    <script src="/node_modules/underscore/underscore.js"></script>
    <script src="/node_modules/bootstrap/dist/js/bootstrap.min.js"></script>
    <script type="text/javascript">
      var BASENAME = 'none';
      (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
      (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
      m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
      })(window,document,'script','//www.google-analytics.com/analytics.js','ga');
      ga('create', 'UA-18750328-2', 'auto');
      ga('send', 'pageview');
    </script>
    <script src="/js/main.js"></script>
  </body>
</html>