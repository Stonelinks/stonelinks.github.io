<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
    <meta name="viewport" content="width=device-width">
    <title>Stonelinks
    </title>
    <link rel="icon" href="/img/favicon.ico" type="image/x-icon">
    <link rel="shortcut icon" href="/img/favicon.ico" type="image/x-icon">
    <link rel="stylesheet" href="http://fonts.googleapis.com/css?family=PT+Sans:400italic,400,700">
    <link rel="stylesheet" href="/css/main.css">
  </head>
  <body>
    <div class="landing"><a href="/" class="brand"><img src="/img/logos/big-logo.png">Stonelinks</a>
      <div class="tagline-bar">Lucas Doyle's website
      </div>
    </div>
    <div role="navigation" class="navbar navbar-default">
      <div class="container">
        <div class="navbar-header">
          <button type="button" data-toggle="collapse" data-target=".navbar-collapse" class="navbar-toggle"><span class="sr-only">Toggle navigation</span><span class="icon-bar"></span><span class="icon-bar"></span><span class="icon-bar"></span></button><a href="/" class="navbar-brand"><img src="/img/logos/big-logo.png">Stonelinks</a>
        </div>
        <div class="navbar-collapse collapse">
          <ul class="nav navbar-nav">
            <li><a href="/blog.html">Blog</a></li>
            <li><a href="/luke.html">About</a></li>
            <li><a href="/projects.html">Projects</a></li>
          </ul>
        </div>
      </div>
    </div>
    <div id="preloaded-images"></div>
    <div class="container">
      <div class="row tag-row">
        <div class="box">
          <div class="col-lg-12">
            <p><span>Showing all posts tagged</span><span class="label label-info tag">systems</span></p>
            <p>Other tags:<a href="/tag/robots/1/"><span class="label label-info tag">robots</span></a><a href="/tag/net%20neutrality/1/"><span class="label label-info tag">net neutrality</span></a><a href="/tag/dataset/1/"><span class="label label-info tag">dataset</span></a><a href="/tag/computer%20vision/1/"><span class="label label-info tag">computer vision</span></a><a href="/tag/python/1/"><span class="label label-info tag">python</span></a><a href="/tag/arduino/1/"><span class="label label-info tag">arduino</span></a><a href="/tag/javascript/1/"><span class="label label-info tag">javascript</span></a><a href="/tag/web%20development/1/"><span class="label label-info tag">web development</span></a><a href="/tag/harvard/1/"><span class="label label-info tag">harvard</span></a><a href="/tag/astrophysics/1/"><span class="label label-info tag">astrophysics</span></a><a href="/tag/documentation/1/"><span class="label label-info tag">documentation</span></a><a href="/tag/telemetry/1/"><span class="label label-info tag">telemetry</span></a><a href="/tag/algorithms/1/"><span class="label label-info tag">algorithms</span></a><a href="/tag/science/1/"><span class="label label-info tag">science</span></a><a href="/tag/C++/1/"><span class="label label-info tag">C++</span></a><a href="/tag/ruby/1/"><span class="label label-info tag">ruby</span></a><a href="/tag/jekyll/1/"><span class="label label-info tag">jekyll</span></a><a href="/tag/i18n/1/"><span class="label label-info tag">i18n</span></a><a href="/tag/labview/1/"><span class="label label-info tag">labview</span></a><a href="/tag/latex/1/"><span class="label label-info tag">latex</span></a><a href="/tag/airplane/1/"><span class="label label-info tag">airplane</span></a><a href="/tag/essay/1/"><span class="label label-info tag">essay</span></a><a href="/tag/manufacturing/1/"><span class="label label-info tag">manufacturing</span></a><a href="/tag/robotics/1/"><span class="label label-info tag">robotics</span></a><a href="/tag/games/1/"><span class="label label-info tag">games</span></a>
            </p>
          </div>
        </div>
      </div>
      <div class="row">
        <div class="box">
          <div class="col-lg-12">
            <hr><a href="/posts/FCC-data/">
              <h1 class="intro-text text-center">FCC ECFS Comment Dataset<br><small>20. August 2014</small></h1></a>
            <hr>
            <div class="external-links"><div class="gh-container">
  <a href="https://github.com/Stonelinks/FCC-Proceeding-14-28-Data" class="btn btn-primary btn-lg btn-block">github.com/Stonelinks/<span class="caps">FCC</span>-Proceeding-14-28-Data</a>
</div>

<p>If you’ve looked at <span class="caps">US</span> news in the last couple months, you’ve no doubt heard something about “net neutrality”. A lot of people have probably heard of it but probably don’t know what it is or why it is important. <a href="https://www.youtube.com/watch?v=fpbOEoRrHyU">John Oliver</a> does an awesome job motivating the topic for the average person. Fair warning, it is a bit&nbsp;scatological.</p>
<p>The <span class="caps">FCC</span> has opened up its <a href="http://apps.fcc.gov/ecfs/">electronic comment filing system</a> (<span class="caps">ECFS</span>) for public comments about legislation that threatens the fairness and openness of the internet. Problem is that the FCC website is slow, PDF only and saves only the last 100 pages of comments. The system is cumbersome at best and inaccessible at worst. To solve this I wrote a scraper several months ago and have been scraping the comments on proceeding 14-28 almost every day. To date I’ve collected 153720 comments and about 570 MB of comment plain text. You can find download instructions and more over on <a href="https://github.com/Stonelinks/FCC-Proceeding-14-28-Data">github</a>.</p>
<p>Today I’m releasing the dataset because I want to see what other people can do with it. I really want to use it to get my hands dirty with natural language processing, sentiment analysis and topic analysis. Hope someone finds it&nbsp;useful!</p>
</div>
            <hr>
            <p>Tags: <a href="/tag/net%20neutrality/1/"><span class="label label-info tag">net neutrality</span></a><a href="/tag/dataset/1/"><span class="label label-info tag">dataset</span></a>
            </p>
          </div>
        </div>
      </div>
      <div class="row">
        <div class="box">
          <div class="col-lg-12">
            <hr><a href="/posts/jekyll-gettext-plugin/">
              <h1 class="intro-text text-center">Jekyll i18n<br><small>01. August 2014</small></h1></a>
            <hr>
            <div class="external-links"><div class="gh-container">
  <a href="https://github.com/Stonelinks/jekyll-gettext-plugin" class="btn btn-primary btn-lg btn-block">github.com/Stonelinks/jekyll-gettext</a>
</div>

<p>As the friendly neighborhood web developer at <span class="caps">MUJIN</span>, one of my responsibilities is <a href="http://mujin.co.jp/">our company’s website</a>. I made this site mostly by myself using <a href="http://jekyllrb.com/">jekyll</a>, the static website generator that github uses for github pages by&nbsp;default.</p>
<p>Jekyll is pretty awesome, but doesn’t support internationalization which we obviously need as a Japanese company. I got something really simple working with <a href="https://github.com/screeninteraction/jekyll-multiple-languages-plugin">jekyll-multiple-languages-plugin</a>, I wasn’t happy with it. The translation index had to be manually kept which was a giant pain (especially since non-technical people edit content on the&nbsp;site).</p>
<p>As a long time django user, I really like the way it handles <a href="https://docs.djangoproject.com/en/dev/topics/i18n/">internationalization</a>, namely the fact that the translation index was automatically updated as people edited content in the standard gettext <code>.po</code> file&nbsp;format.</p>
<p>I endeavored to create such a solution for jekyll using ruby, something I was completely unfamiliar with. I learned some ruby basics, how <a href="https://rvm.io/">rvm</a> and <a href="https://rubygems.org/">RubyGems</a> work, and finally leveraged the existing libraries <a href="https://github.com/grosser/get_pomo">get_pomo</a> and <a href="https://github.com/grosser/fast_gettext">fast_gettext</a> which did a lot of the heavy lifting for me. You can read more about how to actually use my library over on <a href="https://github.com/Stonelinks/jekyll-gettext-plugin">github</a>.</p>
<p>I rounded out our internationalization solution by using the <a href="http://www.w3.org/Protocols/rfc2616/rfc2616-sec14.html#sec14.4">Accept-Language</a> header to redirect users to the website in their browser’s language (but still be able to override it by going to specific language endpoints). Here is the section from  <code>.htaccess</code>:</p>
<pre><code>RewriteEngine On

RewriteCond %{HTTP:Accept-Language} ^en.*$ [NC]
RewriteCond %{REQUEST_URI} ^/$ [NC]
RewriteCond %{QUERY_STRING} !(^q\=) [NC]
RewriteRule ^(.*)$ /en/ [L,R=302]

RewriteCond %{REQUEST_URI} ^/$ [NC]
RewriteCond %{QUERY_STRING} !(^q\=) [NC]
RewriteRule ^(.*)$ /ja [L,R=302]
</code></pre></div>
            <hr>
            <p>Tags: <a href="/tag/web%20development/1/"><span class="label label-info tag">web development</span></a><a href="/tag/ruby/1/"><span class="label label-info tag">ruby</span></a><a href="/tag/jekyll/1/"><span class="label label-info tag">jekyll</span></a><a href="/tag/i18n/1/"><span class="label label-info tag">i18n</span></a>
            </p>
          </div>
        </div>
      </div>
      <div class="row">
        <div class="box">
          <div class="col-lg-12">
            <hr><a href="/posts/mt-major-drone/">
              <h1 class="intro-text text-center">Mt. Major Drone Flight<br><small>01. August 2014</small></h1></a>
            <hr>
            <div class="external-links"><div class="media-container">

<iframe src="http://www.youtube.com/embed/Ak_TNK0fq_M" frameborder="0" allowfullscreen></iframe>

<img src="/img/posts/IMG_20140623_145234.jpg">

</div>

<p>A month ago my friend Rhys and I hiked up Mt. Major with my plane and his camera and managed to get a pretty great flight recording from the&nbsp;summit!</p>
</div>
            <hr>
            <p>Tags: <a href="/tag/airplane/1/"><span class="label label-info tag">airplane</span></a>
            </p>
          </div>
        </div>
      </div>
      <div class="row">
        <div class="box">
          <div class="col-lg-12">
            <hr><a href="/posts/butt-soup/">
              <h1 class="intro-text text-center">Butt Soup<br><small>01. August 2014</small></h1></a>
            <hr>
            <div class="external-links"><div class="gh-container">
  <a href="http://buttsoup.herokuapp.com/" class="btn btn-primary btn-lg btn-block">buttsoup.herokuapp.com</a>
  <a href="https://github.com/Stonelinks/buttsoup" class="btn btn-primary btn-lg btn-block">github.com/Stonelinks/buttsoup</a>
</div>

<p>This is a silly little text to speech web chat thing I made a few months ago. It allowed me to acquaint myself with a few technologies I’d been meaning to try out. There are also a few easter eggs built in (try typing “cage mode” in and see what&nbsp;happens)</p>
<p><strong>Web&nbsp;Sockets</strong></p>
<p>Blown away by how easy they are to use. I use tools every day that leverage web sockets (the live reloading feature of <a href="https://github.com/gruntjs/grunt-contrib-watch#optionslivereload">grunt-contrib-watch</a> comes to mind), but I guess I didn’t realize how simple they were. Obviously they have pros and cons over <span class="caps">HTTP</span>, but for large real-time systems, all you need is a simple events API and you can get something amazing running in a few hours. I used <a href="http://socket.io/">socket.io</a> which was great but if I had to do it again I’d go with the even higher level <a href="https://github.com/primus/primus">primus</a>.</p>
<p><strong>Web Workers</strong> and <strong>Emscripten</strong></p>
<p>The text to speech part of the chat was done with <a href="https://github.com/kripken/speak.js/">speak.js</a> which is a javascript port of eSpeak (written in C++) made with <a href="https://github.com/kripken/emscripten">Emscripten</a>, an <span class="caps">LLVM</span> bytecode to javascript compiler. Since speech synthesis is a fairly CPU intensive task (and javascript runtimes are almost all single threaded), speak.js runs in a web worker, which is a javascript runtime in a separate&nbsp;thread.</p>
<p><strong>Heroku</strong></p>
<p>Last but not least is <a href="https://www.heroku.com/">Heroku</a>. Heroku is a PaaS (platform as a service) implementation. Companies like Amazon and Rackspace provide customers raw (virtual) servers for them to run their applications on. A PaaS goes even further by providing a platform for customers to run your applications on. You don’t have to think about operating systems, security updates, creating / provisioning <span class="caps">VM</span> images, deployment, configuring databases, web servers, proxies, load balancers, etc. You just write code and push it, and in minutes it is running in the cloud with no work from you. It is a dream for most&nbsp;developers.</p>
<p>I’d say Heroku and <a href="https://cloud.google.com/products/app-engine/">Google App Engine</a> are the two best PaaS implementations out there, but both cost money. I’ve been keeping an eye on open source PaaS alternatives, most notably <a href="https://flynn.io/">flynn</a>. It isn’t quite ready for prime time as of this writing&nbsp;though.</p>
<p>Heroku is great if for no other reason than it provides an amazing set of templates and guidelines for developing a web application using really sensible best practices. It does this in a way that is largely agnostic towards languages and libraries (and even Heroku itself). <a href="http://docs.heroku.com/">docs.heroku.com</a> is just amazing. If you’re newcomer (or even an old fart looking to brush up) to developing web apps, this is a&nbsp;godsend. </p>
</div>
            <hr>
            <p>Tags: <a href="/tag/javascript/1/"><span class="label label-info tag">javascript</span></a><a href="/tag/web%20development/1/"><span class="label label-info tag">web development</span></a>
            </p>
          </div>
        </div>
      </div>
      <div class="row">
        <div class="box">
          <div class="col-lg-12">
            <hr><a href="/posts/interview/">
              <h1 class="intro-text text-center">Web Developer Interview Questions<br><small>31. July 2014</small></h1></a>
            <hr>
            <div class="external-links"><p>We’re constantly looking for talented people to join our small team where I work. When talking to candidates, I felt like I needed a set of questions I could use to guide the conversation and see where they’re&nbsp;at.</p>
<p>Most of the topics have something to do with web development (particularly with javascript), but they start out pretty general and get more specific. Here is what I came up&nbsp;with.</p>
<p></div>
            <p><a href="/posts/interview/" class="btn btn-info">Read more »</a></p>
            <hr>
            <p>Tags: <a href="/tag/javascript/1/"><span class="label label-info tag">javascript</span></a><a href="/tag/web%20development/1/"><span class="label label-info tag">web development</span></a>
            </p>
          </div>
        </div>
      </div>
      <div class="row">
        <div class="box">
          <div class="col-lg-12">
            <hr><a href="/posts/looking-back/">
              <h1 class="intro-text text-center">The Phoenix<br><small>03. June 2014</small></h1></a>
            <hr>
            <div class="external-links"><p>Stonelinks has been around since 2008. It is six years old as of this writing. I feel like that is a long time in internet years. It seems like a long time in real world years — I started it when I was 18 and I just turned 24 a few weeks&nbsp;ago.</p>
<p>When I started Stonelinks I was curious how the internet and websites in general worked (more about Stonelinks’ history <a href="/projects/stonelinks/index.html">here</a>). I was ignorant about everything (as most of the old posts here demonstrate), but slowly I built up my knowledge from scratch. Six years later, I’m the lead web developer at <a href="http://mujin.co.jp/"><span class="caps">MUJIN</span></a>. I’m responsible for creating the web interface for our flagship industrial robotics programming platform. That is just an example, but my understanding and relationship with the internet and the technologies that surround it couldn’t be any more different than it was six years&nbsp;ago.</p>
<p>During that time Stonelinks has sat around in various states of neglect and disrepair. In particular, I haven’t written anything in this blog in almost two years! So many things have changed since then. I graduated college, got a job and moved to Japan for pete’s sake (酒?). Even if nobody reads this blog, I don’t feel good about that. Something must&nbsp;change!</p>
<p>Enter the reincarnated Stonelinks (which you’re looking at right now). I’ve spent a bunch of time over the past month making it awesome. Over the coming weeks I’m going to be releasing some old blog entries and writing more in the future. Some of it may get backdated, but that is okay. From the ashes of neglect and disrepair the new Stonelinks will&nbsp;rise! </p>
</div>
          </div>
        </div>
      </div>
      <div class="row">
        <div class="box">
          <div class="col-lg-12">
            <hr><a href="/posts/2013-irex-binpicking/">
              <h1 class="intro-text text-center">2013 IREX Binpicking Survey<br><small>01. November 2013</small></h1></a>
            <hr>
            <div class="external-links"><p>Back in November I had the chance to take a survey of all the different binpicking systems at the International Robotics Exhibition (<span class="caps">IREX</span>). <a href="http://www.nikkan.co.jp/eve/irex/english/"><span class="caps">IREX</span></a> is massive, the world’s largest robotics expo. It happens in Japan every two years and is chock full of extremely impressive demos. This year my favorite had to be the <a href="http://youtu.be/QR4lG98Ehng">full scale welding line</a> that Mitsubishi made. I there with <span class="caps">MUJIN</span> and even <a href="/img/misc/IMG_20131107_102636.jpg">had my picture on a few advertisements</a>! Anyways, <span class="caps">IREX</span> is too big to talk about&nbsp;here.</p>
<p>As a small robot company just starting out at trying to make one of these binpicking systems, I felt it was important to make a survey of these things. Maybe someone other than us will find this exchaustive analysis useful. I’ve included videos of each (got some really nasty looks trying to record&nbsp;them)!</p>
<iframe style="width: 100%; height: 569px;" src="https://docs.google.com/presentation/d/1UHa4pqw1bnrdN5l-d-cL84rmfrxs0kg98q3t2X60boA/embed?start=false&loop=false&delayms=3000" frameborder="0" allowfullscreen="true" mozallowfullscreen="true" webkitallowfullscreen="true"></iframe>  
</div>
            <hr>
            <p>Tags: <a href="/tag/robots/1/"><span class="label label-info tag">robots</span></a>
            </p>
          </div>
        </div>
      </div>
      <div class="row">
        <div class="box">
          <div class="col-lg-12">
            <hr><a href="/posts/new-resume/">
              <h1 class="intro-text text-center">New Resume<br><small>06. January 2013</small></h1></a>
            <hr>
            <div class="external-links"><p><strong>Update 07-07-2013</strong>: I’ve come up with an even newer iteration of my resume, see it <a href="http://stonelinks.github.io/resume/">here</a> and the actual code that powers it on github <a href="https://github.com/Stonelinks/resume">here</a>.</p>
<p>Over the holidays I finally got around to implementing what I wish existed back when I was looking for a job: a quick, easy, flexible way to write and publish a resume in many formats. The more people who see your resume, the better your chances of getting an interview or call back from a potential employer. This means the more formats and places that your resume is viewable in, the better. When I was looking for a job, I tried to follow this strategy but quickly tired making the same change on multiple versions of my resume in different&nbsp;formats.</p>
<p>Like any programmer that has to do anything more than once, I wanted to automate this tedious editing. So I endeavored create a better resume authoring solution. Specifically, I wanted these&nbsp;features:</p>
<ul>
<li>Explicit separation of resume data from resume&nbsp;formatting</li>
<li>Store resume data in an easy to manipulate&nbsp;format</li>
<li>Write once, publish and deploy the resume&nbsp;everywhere</li>
</ul>
<p>I ended up engineering a solution that used a <span class="caps">JSON</span> file to store resume data, and a simple python program that would use different “writers” to spit out the resume in different formats. Here is a breakdown of the supported formats using a combination of the generator and some macros in a&nbsp;Makefile:</p>
<ul>
<li>text</li>
<li>html</li>
<li>pdf (using <a href="http://code.google.com/p/wkhtmltopdf/">wkhtmltopdf</a>)</li>
<li>markdown</li>
<li>stonelinks-specific markdown (basically a special markdown template used specifically for the resume on this&nbsp;website)</li>
</ul>
<p>Anyhow it is finished and it works great for my purposes. The code is available <a href="https://github.com/Stonelinks/resume">here</a> on github. It should be easy for others to use it, just fork and modify the <span class="caps">JSON</span> with your resume data and have at&nbsp;it!</p>
</div>
            <hr>
            <p>Tags: <a href="/tag/documentation/1/"><span class="label label-info tag">documentation</span></a>
            </p>
          </div>
        </div>
      </div>
      <div class="row">
        <div class="box">
          <div class="col-lg-12">
            <hr><a href="/posts/webgl_blox/">
              <h1 class="intro-text text-center">WebGL Blox<br><small>24. July 2012</small></h1></a>
            <hr>
            <div class="external-links"><p>This is a quick and dirty attempt to a clone a really addicting android game called <a href="https://play.google.com/store/apps/details?id=com.entwicklerx.tapblox&amp;hl=en">Tap Blox</a>. Play by eliminating groups of three or more adjacent blocks of the same color. Currently there is no timing / scoring&nbsp;system.</p>
<p>I did this as an educational exercise, mostly to play around with WebGL and improve my skills at Javascript (which I know very little about). Plus programming is fun in general. The WebGL library I used used is Mr. Doob’s excellent <a href="https://github.com/mrdoob/three.js">Three.js</a>. Hope you enjoy! Best results with Google&nbsp;Chrome.</p>
<div class="text-center">
  <a href="/blox.html" class="btn btn-info btn-lg" target="_blank">Click here to play</a>
</div>
</div>
            <hr>
            <p>Tags: <a href="/tag/games/1/"><span class="label label-info tag">games</span></a><a href="/tag/javascript/1/"><span class="label label-info tag">javascript</span></a>
            </p>
          </div>
        </div>
      </div>
      <div class="row">
        <div class="box">
          <div class="col-lg-12">
            <hr><a href="/posts/lite-write/">
              <h1 class="intro-text text-center">How I do Word Processing<br><small>30. April 2012</small></h1></a>
            <hr>
            <div class="external-links"><div class="gh-container">
  <a href="https://github.com/Stonelinks/Lite-Write" class="btn btn-primary btn-lg btn-block">github.com/Stonelinks/Lite-Write</a>
</div>

<p>A few months ago I came up with a quick and dirty way to write text documents. I’m calling it <a href="https://github.com/Stonelinks/Lite-Write">Lite Write</a> because it is so simple. I’ve been using it in place of a word processor for awhile and been very happy with&nbsp;it.</p>
<p>Like most people who write a lot of code, I’m most comfortable manipulating text in my editor of choice. However, I do a fair amount of writing that needs to be accessible to non programmers, which means my work really can’t stay in plain text forever. Lite write is a simple setup (basically a Makefile and some bits of <span class="caps">HTML</span>/CSS) that allows you&nbsp;to:</p>
<ul>
<li>Write everything in&nbsp;markdown</li>
<li>Produce a <span class="caps">PDF</span> of your&nbsp;document</li>
<li>Produce a standalone <span class="caps">HTML</span> version of your document anyone can view online (this works really nice with&nbsp;dropbox)</li>
<li>Simple, easy to&nbsp;extended</li>
</ul>
<p>Over time I’ve grown very frustrated with traditional word processors (<span class="caps">MS</span> Word, OpenOffice, etc.). Google Docs is pretty good, but not well suited for when you’re offline or need fine control over formatting. I used LaTeX for awhile because it gave me that control over formatting and produced beautiful looking documents. But while awesome for equations, large amounts of text and so many other things, LaTeX’s syntax felt cumbersome for me and seemed way overkill for shorter&nbsp;documents.</p>
<p>Enter Lite Write. Markdown is simple enough that you don’t even need to think about it when writing, and if you need finer control over formatting, just write <span class="caps">HTML</span>. So far has been great, and hopefully other people will read this, use it and maybe even add more formats to&nbsp;it.</p>
</div>
            <hr>
            <p>Tags: <a href="/tag/documentation/1/"><span class="label label-info tag">documentation</span></a>
            </p>
          </div>
        </div>
      </div>
      <div class="row">
        <div class="box">
          <div class="col-lg-12">
            <hr><a href="/posts/new-drone/">
              <h1 class="intro-text text-center">New Aerial Drone<br><small>22. April 2012</small></h1></a>
            <hr>
            <div class="external-links"><div class="media-container">

<iframe src="http://www.youtube.com/embed/3jVKegQwZ24" frameborder="0" allowfullscreen></iframe>

</div>

<p>Good news and bad news! The good news is that in the last month or so at <span class="caps">RPI</span>, my friend Drew and I were able to cobble together some electronics with my airplane and squeeze in some successful flights of an RC drone! In the video above you can see one of our voyages. I successfully piloted the plane over RPI’s campus for about a half hour until the winds started to pick up and things got&nbsp;messy.</p>
<div class="media-container">

<img src="/img/posts/drone.jpg">

<p>Early mock up of the drone with the wings&nbsp;removed.</p>
<p>The camera has since been mounted to a custom pan/tilt module under the&nbsp;engine.</p>

</div>

<p>Which leads to the bad news. The bad news is that it crashed! Or rather I crashed it. Basically the wind was really strong and blew it out of range. We think it took a nose dive several hundred feet into the ground and crashed near Troy Highschool, which was very far away from us. It was lost for two days before we recovered it thanks to <a href="http://www.reddit.com/r/RPI/comments/tj2b2/anyone_seen_a_red_rc_plane_last_seen_doing_a_nose/">Reddit</a>.</p>
<p>The damage was substantial. Besides the airframe being totally trashed, I lost my camera and a brushless motor. Drew faired better, only suffering minor damage to his radio&nbsp;equipment.</p>
<p>Future plans for the drone&nbsp;are:</p>
<ul>
<li>Repair it to pre-crash condition, and never fly in heavy winds&nbsp;again</li>
<li>Make it controllable from a computer (probably with a microcontroller and an&nbsp;Xbee)</li>
<li>Make it autonomously fly! (with <span class="caps">GPS</span>, some kind of horizon sensor, accelerometers, gyros&nbsp;etc.)</li>
</ul>
<p>Other cool applications I can think&nbsp;of:</p>
<ul>
<li>Make 3d maps of things (e.g. map my neighborhood by flying around it while saving images with location and orientation of the&nbsp;drone)</li>
<li>Automatically follow things (maybe use another <span class="caps">GPS</span> as a beacon or build a classifier for&nbsp;OpenCV)</li>
<li>Go to waypoints and drop things (how cool would it be to stand in the middle of a field and have a candy bar drop from the&nbsp;sky?)</li>
</ul>
<p>At any rate, a fun new&nbsp;experiment!</p>
</div>
            <hr>
            <p>Tags: <a href="/tag/airplane/1/"><span class="label label-info tag">airplane</span></a>
            </p>
          </div>
        </div>
      </div>
      <div class="row">
        <div class="box">
          <div class="col-lg-12">
            <hr><a href="/posts/first-contribution-to-opensource/">
              <h1 class="intro-text text-center">Contribution to Open Source Software<br><small>27. March 2012</small></h1></a>
            <hr>
            <div class="external-links"><div class="media-container">

<iframe src="http://www.youtube.com/embed/gLsdHmCKoEw" frameborder="0" allowfullscreen></iframe>

</div>

<p>Up until now, all my contributions to open source have been programs I have written, and as a general practice I like to make all my work open source if I can. However, its a nice feeling to have some code I wrote incorporated into someone else’s project for a&nbsp;change.</p>
<p>The program in question here is called <a href="https://github.com/gnebehay/OpenTLD">OpenTLD</a>. Its a program for tracking objects (not just faces) in unconstrained video streams with <span class="caps">NO</span> training data beforehand (TLD stands for Tracking, Learning and Detection). Instead of using precomputed classifiers (like I previously have done with OpenCV), OpenTLD builds a model of what it is supposed to be detecting on the fly. To demonstrate, above is a slightly creepy demo of OpenTLD tracking my&nbsp;face.</p>
<p></div>
            <p><a href="/posts/first-contribution-to-opensource/" class="btn btn-info">Read more »</a></p>
            <hr>
            <p>Tags: <a href="/tag/computer%20vision/1/"><span class="label label-info tag">computer vision</span></a><a href="/tag/C++/1/"><span class="label label-info tag">C++</span></a>
            </p>
          </div>
        </div>
      </div>
      <div class="row">
        <div class="box">
          <div class="col-lg-12">
            <hr><a href="/posts/sudoku-solver/">
              <h1 class="intro-text text-center">Sudoku Solver<br><small>02. January 2012</small></h1></a>
            <hr>
            <div class="external-links"><p>I got really bored over the holidays and wrote a very naive sudoku solver in C++. Hit read more to see&nbsp;it!</p>
<p></div>
            <p><a href="/posts/sudoku-solver/" class="btn btn-info">Read more »</a></p>
            <hr>
            <p>Tags: <a href="/tag/algorithms/1/"><span class="label label-info tag">algorithms</span></a><a href="/tag/C++/1/"><span class="label label-info tag">C++</span></a>
            </p>
          </div>
        </div>
      </div>
      <div class="row">
        <div class="box">
          <div class="col-lg-12">
            <hr><a href="/posts/binocular-face-tracking-sneak-peek/">
              <h1 class="intro-text text-center">Binocular Face Tracking Sneak Peek<br><small>14. March 2011</small></h1></a>
            <hr>
            <div class="external-links"><p>The code needs a little more polish before I’m happy releasing it, but here is a demo video of the latest incarnation of the ‘bot doing some binocular face detection and tracking. For added fun (and in honor of <a href="http://www.thinkwithportals.com/">Portal 2</a> which comes out this week), I have it playing context-aware sound clips from the turrets in the game when it spots people or loses track of&nbsp;them.</p>
<div class="media-container">

<iframe src="http://www.youtube.com/embed/MACHkIpAZ_w" frameborder="0" allowfullscreen></iframe>

</div>
</div>
            <hr>
            <p>Tags: <a href="/tag/robots/1/"><span class="label label-info tag">robots</span></a><a href="/tag/computer%20vision/1/"><span class="label label-info tag">computer vision</span></a><a href="/tag/python/1/"><span class="label label-info tag">python</span></a>
            </p>
          </div>
        </div>
      </div>
      <div class="row">
        <div class="box">
          <div class="col-lg-12">
            <hr><a href="/posts/active-face-tracking-with-stonebot/">
              <h1 class="intro-text text-center">Active Face Tracking with Stonebot<br><small>14. March 2011</small></h1></a>
            <hr>
            <div class="external-links"><p>I finally have it working! Very excited as I write this. So glad spring break exists otherwise I’d never have the time for this. Long story short, I have face detection working on my personal robot. Check out the video after the break to see it in&nbsp;action.</p>
<div class="media-container">

<iframe src="http://www.youtube.com/embed/RRwMJ8GYT7Y" frameborder="0" allowfullscreen></iframe>

</div>

<p>This has been a goal of mine ever since I started building my personal robot (which, in keeping with the Stonelinks legacy, shall henceforth be known as “Stonebot”). This face tracking makes use of my <a href="/posts/a-more-accurate-coordinate-system/">new method for positioning the camera</a> that I worked on a little over winter break, and is probably the most complicated piece of python I have written to date. Here are some highlights of the&nbsp;project:</p>
<p></div>
            <p><a href="/posts/active-face-tracking-with-stonebot/" class="btn btn-info">Read more »</a></p>
            <hr>
            <p>Tags: <a href="/tag/robots/1/"><span class="label label-info tag">robots</span></a><a href="/tag/computer%20vision/1/"><span class="label label-info tag">computer vision</span></a><a href="/tag/python/1/"><span class="label label-info tag">python</span></a>
            </p>
          </div>
        </div>
      </div>
      <div class="row">
        <div class="box">
          <div class="col-lg-12">
            <hr><a href="/posts/execute-time-and-plot-c-programs-with-python/">
              <h1 class="intro-text text-center">Execute, Time and Plot C++ Programs with Python<br><small>03. February 2011</small></h1></a>
            <hr>
            <div class="external-links"><div class="media-container">

<img src="/img/posts/Fig.png">

</div>

<p>Hate excel? Have python take all the pain away from you! This should appeal to everyone out there who needs a quick way to analyze the runtime time of a bunch of commands to a program given an arbitrary list of arguments. Hating excel/openoffice/spreadsheets in general is&nbsp;optional.</p>
<p>Just like every programmer, I am always trying to find new and interesting ways of automating myself out of a job. To that end, I wrote a pretty cool program last night to help automate my first algorithms&nbsp;lab.</p>
<p></div>
            <p><a href="/posts/execute-time-and-plot-c-programs-with-python/" class="btn btn-info">Read more »</a></p>
            <hr>
            <p>Tags: <a href="/tag/algorithms/1/"><span class="label label-info tag">algorithms</span></a><a href="/tag/python/1/"><span class="label label-info tag">python</span></a>
            </p>
          </div>
        </div>
      </div>
      <div class="row">
        <div class="box">
          <div class="col-lg-12">
            <hr><a href="/posts/rudimentary-gmailbased-print-server/">
              <h1 class="intro-text text-center">Rudimentary Gmail-based Print Server<br><small>26. January 2011</small></h1></a>
            <hr>
            <div class="external-links"><div class="gh-container">
  <a href="https://github.com/Stonelinks/gmail-printsrv" class="btn btn-primary btn-lg btn-block">github.com/Stonelinks/gmail-printsrv</a>
</div>

<p>Another example of python being super useful. I found myself today with a need to network a printer so my room mates and I could print from anywhere on campus. However, figuring out what ports to forward, trying to get <span class="caps">IPP</span> to work and just being generally unhappy with CUPS and the way RPIs network restricts printer traffic / discovery lead me to consider alternate&nbsp;solutions</p>
<p>Enter python and Gmail! I wanted to be able to have someone email me a message with a few keywords in the subject line that would tag any attachments for printing. I then had python log into my email and download the most recent email for printing, and if the attachment was new to it, print it. I wrote a nice little script that does just&nbsp;that:</p>
<p><a href="https://github.com/Stonelinks/gmail-printsrv">Here it is on&nbsp;github</a></p>
<p>All you gotta do is edit the username and password at the top of the script, and set up a cron job to call the script on the machine with the printer&nbsp;attached.</p>
<p>A couple of other comments about this: It is dangerous! Someone could email you a file with a malformed name and escape out of the print command that gets called by the subprocess. Not good. There are probably other security risks (like the fact that your password is stored in plaintext). Thats it! have fun&nbsp;kids!</p>
</div>
            <hr>
            <p>Tags: <a href="/tag/python/1/"><span class="label label-info tag">python</span></a>
            </p>
          </div>
        </div>
      </div>
      <div class="row">
        <div class="box">
          <div class="col-lg-12">
            <hr><a href="/posts/a-more-accurate-coordinate-system/">
              <h1 class="intro-text text-center">A More Accurate Coordinate System<br><small>07. January 2011</small></h1></a>
            <hr>
            <div class="external-links"><div class="media-container">

<iframe src="http://www.youtube.com/embed/c72tK4KTTj0" frameborder="0" allowfullscreen></iframe>

</div>

<p><span class="caps">RPI</span> health and safety inspections did not take kindly to my <a href="/posts/door-mounted-roboschwarzenegger/">door mounted Robo-Schwarzenegger</a>. Apparently I’m not breaking any rules with an internet controlled webcam hanging from my door, but the power cord across the doorway is a tripping hazard. I took Arnold down and brought him home with me over the break with the goal of teaching myself some python and jumping into&nbsp;OpenCV.</p>
<p></div>
            <p><a href="/posts/a-more-accurate-coordinate-system/" class="btn btn-info">Read more »</a></p>
            <hr>
            <p>Tags: <a href="/tag/robots/1/"><span class="label label-info tag">robots</span></a><a href="/tag/computer%20vision/1/"><span class="label label-info tag">computer vision</span></a><a href="/tag/python/1/"><span class="label label-info tag">python</span></a><a href="/tag/arduino/1/"><span class="label label-info tag">arduino</span></a>
            </p>
          </div>
        </div>
      </div>
      <div class="row">
        <div class="box">
          <div class="col-lg-12">
            <hr><a href="/posts/electromagnets-how-do-they-work/">
              <h1 class="intro-text text-center">Electromagnets, How do They Work?<br><small>22. December 2010</small></h1></a>
            <hr>
            <div class="external-links"><div class="media-container">

<img src="/img/posts/downsize1-225x300.jpg">

</div>

<p>Home for the break! My brother asked me for help making a small electromagnet to bring into Boy Scouts for electricity merit badge. I of course jumped at the opportunity, and asked what kind of power source they are going to be using to drive said magnet. He tells me they will be using a single D battery. Thinking this is kind of small, I spent a few hours making the biggest electromagnet I could from a few things around the house I could&nbsp;find.</p>
<p></div>
            <p><a href="/posts/electromagnets-how-do-they-work/" class="btn btn-info">Read more »</a></p>
            <hr>
            <p>Tags: <a href="/tag/science/1/"><span class="label label-info tag">science</span></a>
            </p>
          </div>
        </div>
      </div>
      <div class="row">
        <div class="box">
          <div class="col-lg-12">
            <hr><a href="/posts/stonelinks-hosted-at-my-house/">
              <h1 class="intro-text text-center">Stonelinks Hosted at my House<br><small>21. December 2010</small></h1></a>
            <hr>
            <div class="external-links"><p>Looks like the kinks of my new <a href="/posts/dr-serverlove-or-how-i-learned-to-stop-worrying-and-love-the-raid/">two-server</a> setup are not ironed out. I just got home from <span class="caps">RPI</span> and the old Dell is acting wacky at school. I thoroughly checked both machines before I left for home, and I thought everything was okay. However, upon arriving home, I checked the web server to find that it doesn’t work — not even a 404 page or a time out error, the browser just&nbsp;hangs.</p>
<p>To use anything other than <span class="caps">HTTP</span> on port 80, I need to be on RIP’s VPN. I log into the VPN and start with the basics. The machine (which is not behind a NAT router) responds to ping, however ssh shows the same symptoms as apache and the connection just hangs. I don’t even get a connection refused, path not found or timeout&nbsp;error.</p>
<p>After being thoroughly baffled by this, I ran <span class="caps">NMAP</span> from another machine on the same&nbsp;network:</p>
<pre><code class="lang-bash">[luke@void ~]$ nmap -A -T4 stonelinks.org
Starting Nmap <span class="number">4.11</span> ( http://www.insecure.org/nmap/ ) at <span class="number">2010</span>-<span class="number">12</span>-<span class="number">27</span> <span class="number">03</span>:<span class="number">39</span> <span class="caps">EST</span>
Interesting ports on doylel2.stu.rpi.edu (<span class="number">128.113</span>.<span class="number">38.125</span>):
Not shown: <span class="number">1676</span> closed ports
<span class="caps">PORT</span>    STATE SERVICE  VERSION
<span class="number">21</span>/tcp  open  ftp?
<span class="number">22</span>/tcp  open  ssh?
<span class="number">80</span>/tcp  open  http?
<span class="number">111</span>/tcp open  rpcbind?
</code></pre>
<p>I have <span class="caps">VPN</span> access and control over other computers on the same network, but obviously no physical access to the machine. I have no idea what is going on here. My assumption is that the kernel is hanging on something? But I guess I’ll find out when I get back. Because of the way RPI manages IP addresses, the firewall at RPI, and the uncertainty of the other computer, I’m hesitant to just tell my desktop to take the old MAC / IP combo for Stonelinks until I get back on campus in case I lose both machines. Luckily I had a backup of Stonelinks that I moved to my house. Until I get back on campus, I am hosting off my houses internet connection! Be warned in this time Stonelinks will be operating in a pretty crippled&nbsp;capacity.</p>
</div>
            <hr>
            <p>Tags: <a href="/tag/web%20development/1/"><span class="label label-info tag">web development</span></a>
            </p>
          </div>
        </div>
      </div>
      <div class="row">
        <div class="box">
          <div class="col-lg-12">
            <hr><a href="/posts/dr-serverlove-or-how-i-learned-to-stop-worrying-and-love-the-raid/">
              <h1 class="intro-text text-center">Dr. Serverlove, or How I Learned to Stop Worrying and Love the RAID<br><small>07. December 2010</small></h1></a>
            <hr>
            <div class="external-links"><div class="media-container">

<img src="/img/posts/downsize-300x225.jpg">

<p>These two suckers now live on my desk and throw off a ton of&nbsp;heat.</p>

</div>

<p>I recently completed some much needed upgrades to the servers (hardware and software) that run Stonelinks. This has me very excited and has been a long time in the works! Warning: long and somewhat pointless story of blood, sweat, nerdrage and glorious payoff&nbsp;ahead.</p>
<p></div>
            <p><a href="/posts/dr-serverlove-or-how-i-learned-to-stop-worrying-and-love-the-raid/" class="btn btn-info">Read more »</a></p>
            <hr>
            <p>Tags: <a href="/tag/web%20development/1/"><span class="label label-info tag">web development</span></a>
            </p>
          </div>
        </div>
      </div>
      <div class="row">
        <div class="box">
          <div class="col-lg-12">
            <hr><a href="/posts/documentation-is-done/">
              <h1 class="intro-text text-center">Documentation is done<br><small>25. November 2010</small></h1></a>
            <hr>
            <div class="external-links"><p>Suzanne has told me to stop working on the current iteration of the documentation as I had been writing it for an audience unacquainted with my work, not for her and my coworker. I have provided her with what she needs, but it would be a shame for all the writing I did not to see the light of day. Maybe it will be useful to someone. After all, it was written for an unacquainted audience, so you might learn something! <a href="/misc/CfA_doc.pdf">Here it&nbsp;is</a></p>
</div>
            <hr>
            <p>Tags: <a href="/tag/harvard/1/"><span class="label label-info tag">harvard</span></a><a href="/tag/astrophysics/1/"><span class="label label-info tag">astrophysics</span></a><a href="/tag/documentation/1/"><span class="label label-info tag">documentation</span></a>
            </p>
          </div>
        </div>
      </div>
      <div class="row">
        <div class="box">
          <div class="col-lg-12">
            <hr><a href="/posts/labview-custom-documentation-formats/">
              <h1 class="intro-text text-center">LabVIEW Custom Documentation Formats<br><small>22. November 2010</small></h1></a>
            <hr>
            <div class="external-links"><p>LabVIEW is a necessary and constant evil with my work at the Harvard-Smithsonian Center for Astrophysics, but sometimes it pulls through. Earlier today I found myself with a need to extract a whole bunch of icons, block diagrams and <span class="caps">VI</span> hierarchies a bunch of LabVIEW programs. I had begun that onerous task that many programmers like to sip: documentation. In my case, I was using LaTeX and wanted to include visuals from my LabVIEW&nbsp;stuff.</p>
<p>Up until now I thought this would mean trying to do a million screenshots over <span class="caps">VNC</span> on my work computer, and then going back and cropping what I needed. This seemed horrible though and on further research I was thrilled to find out that LabVIEW can pretty much do this on its own. See the <a href="http://zone.ni.com/reference/en-XX/help/371361B-01/lvconcepts/printing_vis/"><span class="caps">NI</span> website on printing VI documentation</a>.</p>
<p></div>
            <p><a href="/posts/labview-custom-documentation-formats/" class="btn btn-info">Read more »</a></p>
            <hr>
            <p>Tags: <a href="/tag/harvard/1/"><span class="label label-info tag">harvard</span></a><a href="/tag/astrophysics/1/"><span class="label label-info tag">astrophysics</span></a><a href="/tag/labview/1/"><span class="label label-info tag">labview</span></a><a href="/tag/documentation/1/"><span class="label label-info tag">documentation</span></a>
            </p>
          </div>
        </div>
      </div>
      <div class="row">
        <div class="box">
          <div class="col-lg-12">
            <hr><a href="/posts/latex-is-fun/">
              <h1 class="intro-text text-center">Latex is Fun<br><small>22. November 2010</small></h1></a>
            <hr>
            <div class="external-links"><p>I’m using the documentation I’m writing for work at the Harvard-Smithsonain Center for Astrophysics as an excuse to learn LaTeX. For those in my generation who have grown up with <span class="caps">MS</span> Office or openoffice.org, LaTeX is a typesetting language that can trace its roots back to the legendary <a href="http://en.wikipedia.org/wiki/Donald_Knuth">Donald Knuth</a> who wrote TeX back in the&nbsp;‘70s.</p>
<p>Long story short, it is awesome and really straightforward if you’re a programmer. Honestly the thing that upsets me the most about LaTeX is that I didn’t know it existed back when Matt and I were writing / editing that <a href="/misc/IED_tech_report_final.pdf">137 page paper</a> for the <span class="caps">IED</span> border patrol&nbsp;robot!</p>
</div>
            <hr>
            <p>Tags: <a href="/tag/harvard/1/"><span class="label label-info tag">harvard</span></a><a href="/tag/astrophysics/1/"><span class="label label-info tag">astrophysics</span></a><a href="/tag/latex/1/"><span class="label label-info tag">latex</span></a><a href="/tag/documentation/1/"><span class="label label-info tag">documentation</span></a>
            </p>
          </div>
        </div>
      </div>
      <div class="row">
        <div class="box">
          <div class="col-lg-12">
            <hr><a href="/posts/door-mounted-roboschwarzenegger/">
              <h1 class="intro-text text-center">Door Mounted Robo Schwarzenegger<br><small>12. November 2010</small></h1></a>
            <hr>
            <div class="external-links"><div class="media-container">

<img src="/img/posts/downsize_4-225x300.jpg">

</div>

<p>I don’t get to fool around with my own projects nearly as much as I would like, but this weekend I did devote a few hours to finishing up a robotic internet controlled camera on our apartment door, and I made it look like Arnold&nbsp;Schwarzenegger.</p>
<p></div>
            <p><a href="/posts/door-mounted-roboschwarzenegger/" class="btn btn-info">Read more »</a></p>
            <hr>
            <p>Tags: <a href="/tag/robots/1/"><span class="label label-info tag">robots</span></a><a href="/tag/computer%20vision/1/"><span class="label label-info tag">computer vision</span></a><a href="/tag/telemetry/1/"><span class="label label-info tag">telemetry</span></a><a href="/tag/python/1/"><span class="label label-info tag">python</span></a>
            </p>
          </div>
        </div>
      </div>
      <div class="row">
        <div class="box">
          <div class="col-lg-12">
            <hr><a href="/posts/windows-based-webcam-control-software/">
              <h1 class="intro-text text-center">Windows Based Webcam Control Software<br><small>30. September 2010</small></h1></a>
            <hr>
            <div class="external-links"><p>I love nothing more in life than creating and tinkering with the stuff around me. Over the years, this love has taken many different forms. It started out somewhere in elementary school with Legos and taking my toys apart (much to the chagrin of my loving parents). Today it has evolved over the years into weekend projects such as the I’m about to tell you&nbsp;about.</p>
<p>One weekend early in the semester, I found myself with some rare free time and so I chose to make my own internet-aware pan-tilt fixture for my webcam. To my room mates <a href="http://en.wikipedia.org/wiki/Sarcasm">delight</a>, I have placed the controls to this camera on this&nbsp;website.</p>
<p>Projects such as this are just the kind of thing that I love taking time to do. They span the full stack, and involve concepts that go from very low level micro controller programming to high level web programming, using all sorts of code and hardware as in between. It requires quite a lot of different skill sets and knowledge of systems integration for this to work. Anyhow enough self-aggrandizing, I’ll describe how I did it starting very low level at the and working my way&nbsp;up.</p>
<h3 id="hardware">Hardware</h3>
<div class="media-container">

<img src="/img/posts/2010-02-08-193359-150x150.jpg">

</div>

<p>This summer I came into possession of an <a href="http://www.arduino.cc/">Arduino</a> micro controller and <a href="http://www.rcuniverse.com/product_guide/servoprofile.cfm?servo_id=67">some servos</a>. As you can see from the pictures, I connected the servos up to the micro controller, making Y-cables for the power, ground, and signal pins of the servos. I also added a laser diode for good&nbsp;measure.</p>
<p>The servo signal pins were wired to the digital I/O ports on the arduino. I stuffed the Arduino in a metal box I had lying around and hot glued everything together. Predictably, the webcam itself didn’t require much work. It was actually given to me for free! (previous owner couldn’t find drivers for it). I just ripped the stand off of it and glued it to the servos. All in all, this was a cheap and simple that has performed very well for what it was designed to&nbsp;do.</p>
<h3 id="microcontroller-code">Microcontroller&nbsp;Code</h3>
<p>I wrote the following code to establish basic control of the Arduino over its <span class="caps">USB</span> serial adapter. The servos are controlled using a technique called pulse width modulation (PWM). The comments explain what is going on, but for further background reading you can check out <a href="http://en.wikipedia.org/wiki/Pulse-width_modulation">this</a>. It also uses <span class="caps">EEPROM</span> to store the position of the camera between power cycles and resets. For some background about what EEPROM is check out <a href="http://en.wikipedia.org/wiki/EEPROM">this</a>.</p>
<pre><code class="lang-c"><span class="comment">/*
 * File:            pantilt.c
 * Description:     A program for controlling
 *                  servos for use on a pan / tilt
 *                  module on my robot
 * Author:          Lucas Doyle (lucas.p.doyle@gmail.com)
 * Creation Date:   October 16, 2009
 * Revision Date:   Jan 31, 2010
 */</span>

<span class="comment">// Since the Arduino resets itself every time a serial connection is</span>
<span class="comment">// made in windows (if you're writing characters from <span class="caps">PHP</span> or something),</span>
<span class="comment">// I have chosen to use the Arduinos <span class="caps">EEPROM</span> to store the positions</span>
<span class="comment">// between resets. Therefore we include the <span class="caps">EEPROM</span> header.</span>
<span class="preprocessor">#include <span class="caps">EEPROM</span></span>

<span class="comment">// variables dealing with the pins</span>
<span class="keyword">char</span> servoPinX    =  <span class="number">2</span>;    <span class="comment">// control pin for the first servo</span>
<span class="keyword">char</span> servoPinY    =  <span class="number">3</span>;    <span class="comment">// control pin for the second</span>
<span class="keyword">char</span> laserpin     = <span class="number">13</span>;    <span class="comment">// the camera has a little laser diode on it</span>

<span class="comment">// <span class="caps">PWM</span> variables</span>
<span class="keyword">int</span> minPulseX    = <span class="number">600</span>;  <span class="comment">// minimum servo position</span>
<span class="keyword">int</span> maxPulseX    = <span class="number">2400</span>; <span class="comment">// maximum servo position</span>
<span class="keyword">int</span> minPulseY    = <span class="number">500</span>;   <span class="comment">// same thing for other servo</span>
<span class="keyword">int</span> maxPulseY    = <span class="number">1850</span>;
<span class="keyword">char</span> turnRate    = <span class="number">100</span>;  <span class="comment">// servo turn rate increment (larger value, faster rate)</span>
<span class="keyword">char</span> refreshTim  = <span class="number">20</span>;   <span class="comment">// time (ms) between pulses (50Hz)</span>

<span class="comment">// The Arduino will calculate these values</span>
<span class="keyword">int</span> centerServoX;         <span class="comment">// center servo position</span>
<span class="keyword">int</span> centerServoY;
<span class="keyword">int</span> pulseWidthX;          <span class="comment">// servo pulse width</span>
<span class="keyword">int</span> pulseWidthY;
<span class="keyword">char</span> moveServo;            <span class="comment">// raw user input</span>

<span class="keyword">long</span> lastPulse   = <span class="number">0</span>;     <span class="comment">// recorded time (ms) of the last pulse</span>

<span class="comment">// mode variables</span>
<span class="keyword">int</span> laseron      = <span class="number">0</span>;     <span class="comment">// start out with the laser off by default</span>

<span class="comment">// party mode, some stupid idea i had to have the camera</span>
<span class="comment">// spaz out and strobe the laser, has not been written yet</span>
<span class="comment">// because i have not had time</span>
<span class="keyword">int</span> partymode    = <span class="number">0</span>;

<span class="comment">// This function writes an int to eeprom at p_address</span>
<span class="comment">// Adapted from Marc Cardinals work:</span>
<span class="comment">// http://blog.ncode.ca/wp-content/uploads/2008/08/eeprom-int-readwrite.pde</span>
<span class="keyword">void</span> EEPROMWriteInt(<span class="keyword">int</span> p_address, <span class="keyword">int</span> p_value)
{
  byte lowByte = ((p_value &gt;&gt; <span class="number">0</span>) <span class="amp">&amp;</span> <span class="number">0xFF</span>);
  byte highByte = ((p_value &gt;&gt; <span class="number">8</span>) <span class="amp">&amp;</span> <span class="number">0xFF</span>);

  <span class="caps">EEPROM</span>.write(p_address, lowByte);
  EEPROM.write(p_address + <span class="number">1</span>, highByte);
}

<span class="comment">// This function reads the int back</span>
<span class="comment">// Also adapted from Marc Cardinals work:</span>
<span class="comment">// http://blog.ncode.ca/wp-content/uploads/2008/08/eeprom-int-readwrite.pde</span>
<span class="keyword">unsigned</span> <span class="keyword">int</span> EEPROMReadInt(<span class="keyword">int</span> p_address)
{
  byte lowByte = <span class="caps">EEPROM</span>.read(p_address);
  byte highByte = EEPROM.read(p_address + <span class="number">1</span>);
  <span class="keyword">return</span> ((lowByte &lt;&lt; <span class="number">0</span>) <span class="amp">&amp;</span> <span class="number">0xFF</span>) + ((highByte &lt;&lt; <span class="number">8</span>) <span class="amp">&amp;</span> <span class="number">0xFF00</span>); }


<span class="keyword">void</span> setup()
{
  <span class="comment">// Set up servo and laser pins as an output  </span>
  pinMode(servoPinX, <span class="caps">OUTPUT</span>);  
  pinMode(laserpin, OUTPUT);
  pinMode(servoPinY, OUTPUT);  

  <span class="comment">// calculate center positions for both servos  </span>
  centerServoX = maxPulseX - ((maxPulseX - minPulseX)/<span class="number">2</span>);  
  centerServoY = maxPulseY - (((maxPulseY - minPulseY)/<span class="number">2</span>)-<span class="number">280</span>);  

  <span class="comment">// If you're running this for the first time on your arduino,  </span>
  <span class="comment">// uncomment the next two lines to initialize the <span class="caps">EEPROM</span></span>
  <span class="comment">// EEPROMWriteInt(0, centerServoX);  </span>
  <span class="comment">// EEPROMWriteInt(2, centerServoY);  </span>

  pulseWidthX = EEPROMReadInt(<span class="number">0</span>);  
  pulseWidthY = EEPROMReadInt(<span class="number">2</span>);  

  <span class="comment">// begin serial communication  </span>
  Serial.begin(<span class="number">9600</span>);  

  <span class="comment">//Serial.println("Arduino Serial Pan/tilt Control");</span>
  <span class="comment">//Serial.println("Standard <span class="caps">WASD</span> to move, spacebar to center");</span>
  <span class="comment">//Serial.println("L toggles the laser, <span class="caps">TFGH</span> goes to the extremes");</span>
}

<span class="keyword">void</span> loop()
{  
  <span class="comment">// wait for serial input</span>
  <span class="keyword">if</span> (Serial.available() &gt; <span class="number">0</span>)
  {
    <span class="comment">// read the incoming byte:</span>
    moveServo = Serial.read();

    <span class="comment">// if party mode is off, read in commands</span>
    <span class="comment">//if (partymode == 0)</span>
    {
      <span class="comment">//if (moveServo == (char) " ") {/*nothing happens*/}</span>

      <span class="comment">// move left</span>
      <span class="keyword">if</span> (moveServo == <span class="string">'a'</span>) { pulseWidthX = pulseWidthX - turnRate; }

      <span class="comment">// move right</span>
      <span class="keyword">else</span> <span class="keyword">if</span> (moveServo == <span class="string">'d'</span>) { pulseWidthX = pulseWidthX + turnRate; }

      <span class="comment">// move up</span>
      <span class="keyword">else</span> <span class="keyword">if</span> (moveServo == <span class="string">'w'</span>) { pulseWidthY = pulseWidthY - turnRate; }

      <span class="comment">// move down</span>
      <span class="keyword">else</span> <span class="keyword">if</span> (moveServo == <span class="string">'s'</span>) { pulseWidthY = pulseWidthY + turnRate; }

      <span class="comment">// center</span>
      <span class="keyword">else</span> <span class="keyword">if</span> (moveServo == <span class="string">'c'</span>) { pulseWidthX = centerServoX; pulseWidthY = centerServoY;}

      <span class="comment">// move hard left</span>
      <span class="keyword">else</span> <span class="keyword">if</span> (moveServo == <span class="string">'f'</span>) {pulseWidthX = minPulseX; }

      <span class="comment">// move hard right</span>
      <span class="keyword">else</span> <span class="keyword">if</span> (moveServo == <span class="string">'h'</span>) {pulseWidthX = maxPulseX; }

      <span class="comment">// move hard up</span>
      <span class="keyword">else</span> <span class="keyword">if</span> (moveServo == <span class="string">'t'</span>) {pulseWidthY = minPulseY; }

      <span class="comment">// move hard down</span>
      <span class="keyword">else</span> <span class="keyword">if</span> (moveServo == <span class="string">'g'</span>) {pulseWidthY = maxPulseY; }

      <span class="comment">// toggle the laser</span>
      <span class="keyword">else</span> <span class="keyword">if</span> (moveServo == <span class="string">'l'</span>)
      {
        <span class="keyword">if</span> (laseron == <span class="number">0</span>) { digitalWrite(laserpin, <span class="caps">HIGH</span>); laseron = <span class="number">1</span>; }
        <span class="keyword">else</span> <span class="keyword">if</span> (laseron == <span class="number">1</span>) { digitalWrite(laserpin, <span class="caps">LOW</span>); laseron = <span class="number">0</span>; }
      }
    }

    <span class="comment">// however if party mode is enabled</span>
    <span class="comment">//else if (partymode == 1)</span>
    <span class="comment">//{</span>
      <span class="comment">// do some awesome stuff (not yet implemented)</span>
    <span class="comment">//  Serial.print("Party!!! ");</span>
    <span class="comment">//}</span>

    <span class="comment">// party mode</span>
    <span class="comment">//else if (moveServo == 'p')</span>
    <span class="comment">//{</span>
    <span class="comment">//  if (partymode == 0) { partymode = 1; }</span>
    <span class="comment">//  else if (partymode == 1) { partymode = 0; }</span>
    <span class="comment">//}</span>
  }

  <span class="comment">// stop servo pulse at min and max</span>
  <span class="keyword">if</span> (pulseWidthX &gt; maxPulseX) { pulseWidthX = maxPulseX; }
  <span class="keyword">if</span> (pulseWidthX &lt; minPulseX) { pulseWidthX = minPulseX; }
  <span class="keyword">if</span> (pulseWidthY &gt; maxPulseY) { pulseWidthY = maxPulseY; }
  <span class="keyword">if</span> (pulseWidthY &lt; minPulseY) { pulseWidthY = minPulseY; }

  <span class="comment">// print pulseWidth back to the Serial Monitor (uncomment to debug)</span>
  <span class="comment">// Serial.print("Pulse Width: ");</span>
  <span class="comment">// Serial.print(pulseWidth);</span>
  <span class="comment">// Serial.println("us");   // microseconds</span>

  <span class="comment">// pulse the servo every 20 ms (refreshTime) with current pulseWidth</span>
  <span class="comment">// this will hold the servo's position if unchanged, or move it if changed</span>
  <span class="keyword">if</span> (millis() - lastPulse &gt;= refreshTime)
  {
    EEPROMWriteInt(<span class="number">0</span>, pulseWidthX);
    EEPROMWriteInt(<span class="number">2</span>, pulseWidthY);

    digitalWrite(servoPinX, <span class="caps">HIGH</span>);   <span class="comment">// start the pulse</span>
    delayMicroseconds(pulseWidthX);  <span class="comment">// pulse width</span>
    digitalWrite(servoPinX, <span class="caps">LOW</span>);    <span class="comment">// end the pulse</span>

    digitalWrite(servoPinY, <span class="caps">HIGH</span>);   <span class="comment">// start the pulse for servo 2</span>
    delayMicroseconds(pulseWidthY);  <span class="comment">// pulse width</span>
    digitalWrite(servoPinY, <span class="caps">LOW</span>);    <span class="comment">// stop the pulse</span>

    lastPulse = millis();            <span class="comment">// save the time of the last pulse</span>
  }
}
</code></pre>
<h3 id="establishing-serial-communication">Establishing Serial&nbsp;Communication</h3>
<p>If you load the above code into the Arduino’s <span class="caps">IDE</span> and flash it to your microcontroller, you end up with a nice, intuitive way of manually controlling your pan / tilt mechanism. You can try things out by opening the Serial Monitor in the Arduino IDE and moving around using WASD, or move to the extremes using TFGH. Pressing ‘C’ centers the camera back and ‘L’ <a href="http://spf.fotolog.com/photo/47/10/95/vanguardista2104/1211331863_f.jpg">fires the laser</a>. Arguably, you could stop here and technically still have a way of controlling the camera over the internet with the power of linux. All one would need to do is open up a terminal or ssh into the machine and run the following&nbsp;command:</p>
<pre><code class="lang-bash"> ~$ screen /dev/ttyUSB0
</code></pre>
<p>This was not good enough for me though, as I wanted to control this through a web browser, which brings us&nbsp;to…</p>
<h3 id="the-web-server">The Web&nbsp;Server</h3>
<div class="media-container">

<img src="/img/posts/2010-02-08-193241-150x150.jpg">

</div>

<p>The Arduino is cool and all, but since the ultimate goal of this project is to control it over the internet, having a web server is an obvious requirement. Unfortunately for me, my web server also happens to be my self-built desktop that I use for almost all my other engineering work and day to day activities. Because of this, I need access to few windows only applications (Solidworks, LabVIEW, Photoshop, Steam, etc..) which rules out any linux server platforms if I want 100% uptime. This is an unfortunate constraint that caused me quite a lot of headaches down the line. In the future when I have another computer to spare and improve on this project, I will use the <a href="http://blog.taragana.com/wp-content/uploads/2008/03/linux-logo.jpg">right tool</a> for the&nbsp;job. </p>
<p>After all that rambling, you’re probably wondering how I have my web server configured. The only relevant details are that I am running stock <a href="http://www.wampserver.com/en/">WampServer</a> with <span class="caps">PHP</span> 5.3.0 with short tags&nbsp;enabled.</p>
<h3 id="nightmare-in-php-land">Nightmare in <span class="caps">PHP</span>&nbsp;land</h3>
<p>I thought this would be easy. Since <span class="caps">PHP</span> is a server side scripting language, it has libraries that allow it to read and write to and from serial ports. So one would think that something like the following would&nbsp;work:</p>
<pre><code class="lang-php"><span class="variable">$fp</span> =fopen(<span class="string">"<span class="caps">COM3</span>"</span>, <span class="string">"w"</span>);
fwrite(<span class="variable">$fp</span>, chr(<span class="string">'c'</span>)); <span class="comment">// write your character to the Arduino here</span>
sleep(<span class="number">1</span>);
fclose(<span class="variable">$fp</span>);
</code></pre>
<p>However, for reasons I do not completely understand, this did not work for me under Windows 7, but it did with Linux (substituting <span class="caps">COM3</span> for /dev/ttyUSB0). This problem persisted, as I also tried using the <a href="http://www.phpclasses.org/browse/package/3679.html"><span class="caps">PHP</span> serial class</a>, but it too proved to be equally as ineffective. I finally circumvented the need for <span class="caps">PHP</span> to communicate with the COM port entirely by compiling several very basic exe’s in <a href="http://processing.org/">processing</a> that sent individual character commands to the Arduino and then called them in <span class="caps">PHP</span> using the exec()&nbsp;function.</p>
<p>While extremely inefficient, this was the quickest, most reliable solution to my problem. Of course, this would all have been avoided in the first place had I been using Linux, as <span class="caps">PHP</span> has no problem writing to /dev/ttyUSB0 like it would a normal file in&nbsp;Linux.</p>
<h3 id="building-the-webpage">Building the&nbsp;Webpage</h3>
<p>By accessing the <a href="http://www.w3schools.com/PHP/php_get.asp"><span class="caps">PHP</span> $_GET</a> array, I was able to map incoming <span class="caps">GET</span> requests to different URLS to control what commands were sent to the camera. The PHP included in the header of the page is shown&nbsp;here:</p>
<pre><code class="lang-php"><span class="comment">// check the <span class="caps">GET</span> action var to see if an action is to be performed</span>
<span class="keyword">if</span> (<span class="keyword">isset</span>(<span class="variable">$_GET</span>[<span class="string">'action'</span>]))
{
   <span class="comment">// action required! build our command...</span>
   <span class="variable">$basecmd</span> = <span class="string">"F:\\wamp\\www\\luke\\Projects\\personal_robot\\personal robot\\commands\\"</span>;
   <span class="variable">$cmd</span> = <span class="variable">$basecmd</span> . <span class="variable">$_GET</span>[<span class="string">'action'</span>] . <span class="string">"\\application.windows\\"</span> . <span class="variable">$_GET</span>[<span class="string">'action'</span>] . <span class="string">".exe"</span>;
   exec(<span class="variable">$cmd</span>);
}
</code></pre>
<p>And the <span class="caps">HTML</span> for the rest of the page is simply a 3x3 table with some hyperlinks to the right URLs with things like <code>?action=up</code>, <code>?action=down</code>, ect. placed in the right&nbsp;spot.</p>
<h3 id="webcam">Webcam</h3>
<p>To manage the webcam feed, I am using a program called <a href="http://www.lundie.ca/fwink/">Fwink</a> to take a picture every second and then using <span class="caps">AJAX</span> to automatically refresh the image once the page is loaded. However, there are many ways to manage a webcam feed and the details of how you do it is out of the scope of what I’m talking about&nbsp;here.</p>
</div>
            <p><a href="/posts/windows-based-webcam-control-software/" class="btn btn-info">Read more »</a></p>
            <hr>
            <p>Tags: <a href="/tag/systems/1/"><span class="label label-info tag">systems</span></a><a href="/tag/arduino/1/"><span class="label label-info tag">arduino</span></a><a href="/tag/telemetry/1/"><span class="label label-info tag">telemetry</span></a>
            </p>
          </div>
        </div>
      </div>
    </div>
    <div class="row footer-row">
      <div class="box">
        <div class="col-lg-12"><a href="/archive.html">
            <h4 class="pull-left">« Archives</h4></a>
        </div>
      </div>
    </div>
    <footer>
      <div class="container">
        <div class="row">
          <div class="col-lg-12 text-center"><a href="https://www.facebook.com/stonelinks" target="_blank" class="social"><i class="fa fa-facebook"></i></a><a href="https://github.com/Stonelinks" target="_blank" class="social"><i class="fa fa-github"></i></a><a href="https://twitter.com/#!/Stonelinks" target="_blank" class="social"><i class="fa fa-twitter"></i></a><a href="https://plus.google.com/116178490514652721625/posts" target="_blank" class="social"><i class="fa fa-google-plus"></i></a><a href="http://www.linkedin.com/pub/lucas-doyle/25/550/169" target="_blank" class="social"><i class="fa fa-linkedin"></i></a><a href="http://www.youtube.com/user/RealStonelinks" target="_blank" class="social"><i class="fa fa-youtube"></i></a><a href="mailto:lucas.p.doyle@gmail.com?Subject=Hello" target="_top" class="footer-link">contact</a>
          </div>
        </div>
      </div>
    </footer><!--[if lt IE 9]>
    <script src="/vendor/html5shiv/dist/html5shiv.min.js"></script>
    <script src="/vendor/respond/dest/respond.min.js"></script><![endif]-->
    <script src="/vendor/jquery/jquery.min.js"></script>
    <script src="/vendor/underscore/underscore.js"></script>
    <script src="/vendor/bootstrap/dist/js/bootstrap.min.js"></script>
    <script type="text/javascript">var BG_IMAGES = ["/img/backgrounds/06uh37r.jpg","/img/backgrounds/14206376348_fca4af4ba5_o.jpg","/img/backgrounds/1979230_10152035339809685_1025831531_o.jpg","/img/backgrounds/2000-01-01 08.30.12.jpg","/img/backgrounds/2012-12-02 00.41.05.jpg","/img/backgrounds/2012-12-06 15.09.02.jpg","/img/backgrounds/2013-05-01 08.31.27.jpg","/img/backgrounds/2013-05-18 13.07.32.jpg","/img/backgrounds/2013-09-20 05.26.41.jpg","/img/backgrounds/2013-09-20 05.30.41.jpg","/img/backgrounds/2013-11-24 18.07.08.jpg","/img/backgrounds/2013-12-20 14.27.13.jpg","/img/backgrounds/2013-12-28 19.16.24.jpg","/img/backgrounds/287299main_dextre_iss017_big_full.jpg","/img/backgrounds/34DnPmX.jpg","/img/backgrounds/5bml6q6.jpg","/img/backgrounds/7jWBoem.jpg","/img/backgrounds/A52It0Q.jpg","/img/backgrounds/Boeing_747-8_Test_Planes_in_Assembly.jpg","/img/backgrounds/Dtd8OaS.jpg","/img/backgrounds/EWwV235.jpg","/img/backgrounds/Eourq.jpg","/img/backgrounds/GkWIkzl.jpg","/img/backgrounds/GpCUV.jpg","/img/backgrounds/IMG_1142 copy-X2.jpg","/img/backgrounds/IMG_20120721_181258.jpg","/img/backgrounds/IZyTICW.jpg","/img/backgrounds/IijALtC.jpg","/img/backgrounds/J8Oqyyd.jpg","/img/backgrounds/KBMGZnm.jpg","/img/backgrounds/MbN1OhC.jpg","/img/backgrounds/ONn4OVE.jpg","/img/backgrounds/Red, White and Enterprise-X3.jpg","/img/backgrounds/STS-134_International_Space_Station_after_undocking.jpg","/img/backgrounds/Su0YWko.jpg","/img/backgrounds/TUZyh.jpg","/img/backgrounds/TuBipfq.jpg","/img/backgrounds/Wsvb8tw.jpg","/img/backgrounds/XvkHfUA.jpg","/img/backgrounds/YseOPg6.jpg","/img/backgrounds/ZhWyntZ.jpg","/img/backgrounds/d7t5BrZ.jpg","/img/backgrounds/enukwns.jpg","/img/backgrounds/fr42b.jpg","/img/backgrounds/g8yF11T.jpg","/img/backgrounds/godD0Nj.jpg","/img/backgrounds/k9JWU9N.jpg","/img/backgrounds/kkhlkasdhjl3.png","/img/backgrounds/m1gD1NC.jpg","/img/backgrounds/m95qL89.jpg","/img/backgrounds/mooCZ.jpg","/img/backgrounds/nBEcpIY.jpg","/img/backgrounds/nLpQ2G3.jpg","/img/backgrounds/nUje1Xs.jpg","/img/backgrounds/ozjI2XF.jpg","/img/backgrounds/p0QNNrI.jpg","/img/backgrounds/raddmHE.jpg","/img/backgrounds/rhvP0wn.jpg","/img/backgrounds/s_f02_RTR3FJM0.jpg","/img/backgrounds/tmEkJ7Q.jpg","/img/backgrounds/uMrsMXh.jpg","/img/backgrounds/w0Pgof8.jpg","/img/backgrounds/wallpaper-1312831.jpg","/img/backgrounds/wallpaper-1441536.jpg","/img/backgrounds/wjZsmhr.jpg","/img/backgrounds/x2bkKQS.jpg","/img/backgrounds/xKTWtJC.jpg","/img/backgrounds/xkl9FoE.jpg","/img/backgrounds/y4WGD7I.jpg","/img/backgrounds/yrZCDd1.jpg"];
      var BASENAME = 'none';
       
      (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
      (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
      m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
      })(window,document,'script','//www.google-analytics.com/analytics.js','ga');
      ga('create', 'UA-18750328-2', 'auto');
      ga('send', 'pageview');
    </script>
    <script src="/js/main.js"></script>
  </body>
</html>