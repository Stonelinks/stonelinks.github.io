<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
    <meta name="viewport" content="width=device-width">
    <title>Stonelinks web framework - Stonelinks
    </title>
    <link rel="icon" href="/img/favicon.ico" type="image/x-icon">
    <link rel="shortcut icon" href="/img/favicon.ico" type="image/x-icon">
    <link rel="stylesheet" href="http://fonts.googleapis.com/css?family=PT+Sans:400italic,400,700">
    <link rel="stylesheet" href="/css/main.css"><!--[if lt IE 9]>
    <script src="/vendor/html5shiv/dist/html5shiv.min.js"></script>
    <script src="/vendor/respond/dest/respond.min.js"></script><![endif]-->
    <script src="/vendor/jquery/jquery.min.js"></script>
    <script src="/vendor/underscore/underscore.js"></script>
    <script src="/vendor/bootstrap/dist/js/bootstrap.min.js"></script>
    <script src="/js/main.js"></script>
    <script type="text/javascript">var BG_IMAGES = ["/img/backgrounds/06uh37r.jpg","/img/backgrounds/0GBq3.jpg","/img/backgrounds/1021101552.jpg","/img/backgrounds/121027_162023_000.jpg","/img/backgrounds/14206376348_fca4af4ba5_o.jpg","/img/backgrounds/1780754_589564401120703_639857649_n (1).jpg","/img/backgrounds/1979230_10152035339809685_1025831531_o.jpg","/img/backgrounds/2000-01-01 08.30.12.jpg","/img/backgrounds/2010-08-19 19.25.57.jpg","/img/backgrounds/2010-08-21 01.04.54.jpg","/img/backgrounds/2011-04-23_07-35-15_846.jpg","/img/backgrounds/2012-05-21_12-21-51_382.jpg","/img/backgrounds/2012-06-13_11-30-01_10.jpg","/img/backgrounds/2012-06-13_13-04-51_940.jpg","/img/backgrounds/2012-12-02 00.41.05.jpg","/img/backgrounds/2012-12-06 15.09.02.jpg","/img/backgrounds/2013-03-03 17.53.11.jpg","/img/backgrounds/2013-05-01 08.31.27.jpg","/img/backgrounds/2013-05-18 13.07.32.jpg","/img/backgrounds/2013-08-22 13.00.42.jpg","/img/backgrounds/2013-08-30 18.41.41.jpg","/img/backgrounds/2013-08-30 19.58.14.jpg","/img/backgrounds/2013-09-20 05.09.53.jpg","/img/backgrounds/2013-09-20 05.26.41.jpg","/img/backgrounds/2013-09-20 05.30.41.jpg","/img/backgrounds/2013-09-20 05.32.01.jpg","/img/backgrounds/2013-11-24 18.07.08.jpg","/img/backgrounds/2013-11-24 19.05.27.jpg","/img/backgrounds/2013-11-25 15.04.06.jpg","/img/backgrounds/2013-12-20 14.27.13.jpg","/img/backgrounds/2013-12-28 19.16.24.jpg","/img/backgrounds/2014-2707.jpg","/img/backgrounds/2048 (1).jpg","/img/backgrounds/2048.jpg","/img/backgrounds/2700262886_6b0fd48dc8_b.jpg","/img/backgrounds/287299main_dextre_iss017_big_full.jpg","/img/backgrounds/300V_20A_floating_Kr.jpg","/img/backgrounds/3248918413_1deff78256_o.jpg","/img/backgrounds/34DnPmX.jpg","/img/backgrounds/495251.jpg","/img/backgrounds/5bml6q6.jpg","/img/backgrounds/5gn0Uw6.jpg","/img/backgrounds/75MtJTF.jpg","/img/backgrounds/7SqL0BC.jpg","/img/backgrounds/7jWBoem.jpg","/img/backgrounds/8983558547_c0caa28995_b.jpg","/img/backgrounds/A52It0Q.jpg","/img/backgrounds/AYmUVEm.jpg","/img/backgrounds/Apollo16LM.jpg","/img/backgrounds/Boeing_747-8_Test_Planes_in_Assembly.jpg","/img/backgrounds/CWA87fd.jpg","/img/backgrounds/CcMlC0x.jpg","/img/backgrounds/DQBkjl0.jpg","/img/backgrounds/Dtd8OaS.jpg","/img/backgrounds/EWwV235.jpg","/img/backgrounds/Eourq.jpg","/img/backgrounds/Eso-paranal-16.jpg","/img/backgrounds/FDoNLz1.jpg","/img/backgrounds/GkWIkzl.jpg","/img/backgrounds/GpCUV.jpg","/img/backgrounds/IMG_1142 copy-X2.jpg","/img/backgrounds/IMG_20120721_181258.jpg","/img/backgrounds/IMG_20120825_201522.jpg","/img/backgrounds/IPwZZ29.jpg","/img/backgrounds/IQgb2Fb.jpg","/img/backgrounds/IZyTICW.jpg","/img/backgrounds/IijALtC.jpg","/img/backgrounds/J8Oqyyd.jpg","/img/backgrounds/KBMGZnm.jpg","/img/backgrounds/MbN1OhC.jpg","/img/backgrounds/NIkQVMz.jpg","/img/backgrounds/Navy-Radome.jpg","/img/backgrounds/ONn4OVE.jpg","/img/backgrounds/PeoCslF.jpg","/img/backgrounds/Preamplifier_at_the_National_Ignition_Facility.jpg","/img/backgrounds/Red, White and Enterprise-X3.jpg","/img/backgrounds/STS-134_International_Space_Station_after_undocking.jpg","/img/backgrounds/TUZyh.jpg","/img/backgrounds/TuBipfq.jpg","/img/backgrounds/UP_EMD_SD9043AC_Joso_Bridge_USA.jpg","/img/backgrounds/Up2Vo3r.jpg","/img/backgrounds/Wsvb8tw.jpg","/img/backgrounds/XYWsmJC.jpg","/img/backgrounds/Xn25v.jpg","/img/backgrounds/XvkHfUA.jpg","/img/backgrounds/YseOPg6.jpg","/img/backgrounds/ZhWyntZ.jpg","/img/backgrounds/bHVlqeR.jpg","/img/backgrounds/bXTsleX.jpg","/img/backgrounds/d7t5BrZ.jpg","/img/backgrounds/desert_city.jpg","/img/backgrounds/enukwns.jpg","/img/backgrounds/fr42b.jpg","/img/backgrounds/g8yF11T.jpg","/img/backgrounds/godD0Nj.jpg","/img/backgrounds/hTkXfEY.jpg","/img/backgrounds/heic0504b.jpg","/img/backgrounds/highflight-operationa-go8.jpg","/img/backgrounds/k9JWU9N.jpg","/img/backgrounds/kQj6gNC.jpg","/img/backgrounds/kkhlkasdhjl3.png","/img/backgrounds/m1gD1NC.jpg","/img/backgrounds/m95qL89.jpg","/img/backgrounds/mooCZ.jpg","/img/backgrounds/n0qGynd.jpg","/img/backgrounds/nBEcpIY.jpg","/img/backgrounds/nLpQ2G3.jpg","/img/backgrounds/ozjI2XF.jpg","/img/backgrounds/p0QNNrI.jpg","/img/backgrounds/pTApMWS.jpg","/img/backgrounds/pia18390-full.jpg","/img/backgrounds/raddmHE.jpg","/img/backgrounds/rhvP0wn.jpg","/img/backgrounds/s_f02_RTR3FJM0.jpg","/img/backgrounds/tCGzzS2.jpg","/img/backgrounds/tmEkJ7Q.jpg","/img/backgrounds/uMrsMXh.jpg","/img/backgrounds/vmBnAIS.jpg","/img/backgrounds/w0Pgof8.jpg","/img/backgrounds/wallpaper-1312831.jpg","/img/backgrounds/wallpaper-1441536.jpg","/img/backgrounds/wjZsmhr.jpg","/img/backgrounds/x2bkKQS.jpg","/img/backgrounds/xKTWtJC.jpg","/img/backgrounds/xkl9FoE.jpg","/img/backgrounds/xrH9T22.jpg","/img/backgrounds/y4WGD7I.jpg","/img/backgrounds/yrZCDd1.jpg","/img/backgrounds/ywhjtHh.jpg","/img/backgrounds/znfvr.jpg"];
      var BASENAME = 'projects/stonelinks/index';
       
      var _gaq = _gaq || [];
      _gaq.push(['_setAccount', 'UA-18750328-2']);
      _gaq.push(['_trackPageview']);
       
      (function() {
        var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;
        ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
        var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s);
      })();
    </script>
  </head>
  <body>
    <div class="landing"><a href="/" class="brand"><img src="/img/logos/big-logo.png">Stonelinks</a>
      <div class="tagline-bar">Lucas Doyle's website
      </div>
    </div>
    <div role="navigation" class="navbar navbar-default">
      <div class="container">
        <div class="navbar-header">
          <button type="button" data-toggle="collapse" data-target=".navbar-collapse" class="navbar-toggle"><span class="sr-only">Toggle navigation</span><span class="icon-bar"></span><span class="icon-bar"></span><span class="icon-bar"></span></button><a href="/" class="navbar-brand"><img src="/img/logos/big-logo.png">Stonelinks</a>
        </div>
        <div class="navbar-collapse collapse">
          <ul class="nav navbar-nav">
            <li><a href="/blog.html">Blog</a></li>
            <li><a href="/luke.html">About</a></li>
            <li><a href="/projects.html">Projects</a></li>
          </ul>
        </div>
      </div>
    </div>
    <div class="container">
      <div class="row">
        <div class="box">
          <div class="col-lg-12">
            <hr><a href="/projects/stonelinks/">
              <h1 class="intro-text text-center">Stonelinks web framework</h1></a>
            <hr><div class="img-container">

<img src="/img/projects/stonelinks-web-framework.png">

</div>

<p>This project is my take on how writing a mostly static website with a lot of content should work. It is what runs this very website. It requires no server side scripting or database of any kind. In fact it is all static files that are compiled from simple markdown files. It is a not well suited for web apps with an <span class="caps">API</span> and lots of dynamic&nbsp;content.</p>
<p><br></p>
<h2 id="history">History</h2>
<p>“Stonelinks” is a moniker I use for myself all over the internet and of course the name of this website. In one form or another, Stonelinks has been online since late 2008 when I decided to figure out how the internet works (a task which is still&nbsp;ongoing).</p>
<p>Since 2008, Stonelinks has gone through many incarnations. For a long time it ran on wordpress (before I knew how to program mind you!). As is the way with many wordpress sites I’ve been involved in, the whole thing was a bit overgrown, cluttered and hard to control. Since Stonelinks is fundamentally static content (mostly), I thought that there had to be a better&nbsp;way.</p>
<p>Fast forward to winter break 2012. I happened to have a bunch of spare time on a cruise with no internet access. Like any sensible programming addict, I really wanted a new project to occupy myself with while I sat around watching people gorge themselves on the lido deck. Hence this incarnation of Stonelinks was&nbsp;born!</p>
<p><br></p>
<h2 id="design">Design</h2>
<p>My design goals for this was to have something that, from an authors perspective, was dead simple to use. Basically all I wanted authors to do is create a single <a href="http://daringfireball.net/projects/markdown/">markdown</a> file with just the body of a page and have it automatically add the rest of the website around it. This means things like contextual sidebars, navigation, comments, links,&nbsp;etc.</p>
<p>In keeping with the goal of trying to keep this as simple as possible, this meant no server side scripting lanugages or databases. I tried to only add complexity as I need it. Therefore, all the content of this website is static <span class="caps">HTML</span> that was automatically&nbsp;generated.</p>
<p>In hindsight, static <span class="caps">HTML</span> generators like this have been done a zillion times before. Hyde and Firmant come to mind. But as with a lot of things, its feels nice to make a tool yourself and use it for yourself. Things like this also help you appreciate the work and expertise that others have done. Too many times I have heard programmers say things like “django sucks!”. If django sucks so much, try to write something that does what django does (or better yet, submit a patch or something), then we’ll talk! <strong>tl;dr</strong>: <a href="http://en.wikipedia.org/wiki/Eating_your_own_dog_food">eat your own dog food</a>.</p>
<p><br></p>
<h2 id="features">Features</h2>
<ul>
<li>Page hierarchy<ul>
<li>Store all content as markdown files structured into directories to form a&nbsp;hierarchy</li>
<li>Automatic generation of a site map based on&nbsp;hierarchy</li>
<li>Automatic generation of navigation sidebar for all pages on the same level in&nbsp;hierarchy</li>
<li>Automatic generation of index pages in a directory if an <code>index.md</code> file doesn’t exist (sorta how a web server&nbsp;does)</li>
<li>Breadcrumb navigation for each page from root of tree to current&nbsp;page</li>
</ul>
</li>
<li><span class="caps">URL</span> control<ul>
<li>Should be able to control everything about a <span class="caps">URL</span> from:<ul>
<li>Name of markdown&nbsp;file</li>
<li>Location in a&nbsp;directory</li>
</ul>
</li>
</ul>
</li>
<li>Portability<ul>
<li>Should be able to build locally and deploy the website&nbsp;anywhere</li>
<li>Preview changes to website locally without connection to&nbsp;internet</li>
<li>Easy and fast to deploy (deploy scripts that use&nbsp;rsync)</li>
</ul>
</li>
<li>Shortcodes:<ul>
<li>Easy creation of relative links to preserve&nbsp;portability.</li>
<li>Enabling and disable&nbsp;comments</li>
<li>Easy inclusion of&nbsp;galleries</li>
<li>Time / date / other convenience&nbsp;functions</li>
</ul>
</li>
<li>Misc features<ul>
<li>Support for a blog:<ul>
<li>Sort entries based on&nbsp;date</li>
<li>Indexes are paginated listings of posts (like you would expect on a&nbsp;blog)</li>
<li>Automatic full&nbsp;archives</li>
</ul>
</li>
<li>Write all content in&nbsp;markdown</li>
<li>Comments via&nbsp;disqus</li>
<li>Page&nbsp;minification</li>
</ul>
</li>
</ul>
<p><br></p>
<h2 id="code">Code</h2>
<p>Check out the source code on <a href="https://github.com/Stonelinks/stonelinks.org">github</a></p>
<p><br></p>
<h2 id="how-to-use">How to&nbsp;use</h2>
<p>The general process of how to use the Stonelinks web framework is pretty&nbsp;simple:</p>
<ul>
<li>Pull down the git&nbsp;repository</li>
<li>Write the content of your web pages in markdown&nbsp;files</li>
<li>Put them in the <code>content</code> directory either alone or put related files a&nbsp;directory</li>
<li>Change some simple settings in&nbsp;config.py</li>
<li>Modify the makefile to deploy to your web server of&nbsp;choice</li>
<li>Run <code>make site</code></li>
</ul>
<p><br></p>
<h2 id="how-it-works">How it&nbsp;works</h2>
<p>First, a website object from <code>objects.py</code> is created. It crawls the source directory (in this case it is <code>content</code>) and constructs a tree out of the filenames and directory names contained inside. In the tree, each node is actually a page object. At first glance, this makes no sense because it means directories are actually being picked up as files representing web pages. However, as we will soon see, if an <code>index.md</code> file is not present under a directory, the parent directory page object will yeild an automatically generated index similar to what apache and other webservers&nbsp;do.</p>
<p><br></p>
<h3 id="traversal">Traversal</h3>
<p>Once a tree has been made, whenever an operation needs to be conducted on a page by page basis (like say, generating the html for sidebar navigation on each page), there exists a utility function inside the website object called <code>traverse</code> that will visit every page in the tree breadth-first style. <code>traverse</code> accepts a functional argument that it will in turn call on every page it visits as it traverses through the&nbsp;tree.</p>
<p>In addition to automatically generating sidebars on each page, a few other things are done using this <code>traverse</code> technique:</p>
<ul>
<li>Site&nbsp;map</li>
<li>Automatic&nbsp;indexes</li>
<li>Site&nbsp;compilation</li>
</ul>
<p><br></p>
<h3 id="page-and-site-compilation">Page and site&nbsp;compilation</h3>
<p>To compile a single page, take a look at <code>pages.py</code>. To see how the whole site is compiled, take a look at <code>gen_pages</code> in <code>objects.py</code>.</p>
<p><br></p>
<h3 id="automatic-indexes">Automatic&nbsp;indexes</h3>
<p>Lets consider a website with the following&nbsp;structure:</p>
<ul>
<li><code>root</code> (folder)<ul>
<li><code>index.md</code></li>
<li><code>contact.md</code></li>
<li><code>about.md</code></li>
<li><code>projects</code> (folder)<ul>
<li><code>project1.md</code></li>
<li><code>project2.md</code></li>
<li><code>project3.md</code></li>
</ul>
</li>
</ul>
</li>
</ul>
<p>As you can see, the files <code>index.md</code>, <code>content.md</code>, <code>about.md</code>, and <code>projects[1-3].md</code> are compiled in a straightforward manner, and their html files are placed in the cooresponding location in the build directory. However, one will notice that if you were to visit <code>www.domain.com/projects</code>, no index would be presented. Therefore, when this occurs, the parent page object (created from the <code>projects</code> directory) generates a dummy&nbsp;index.</p>

          </div>
        </div>
      </div>
    </div>
    <footer>
      <div class="container">
        <div class="row">
          <div class="col-lg-12 text-center"><a href="https://www.facebook.com/stonelinks" target="_blank" class="social"><i class="fa fa-facebook"></i></a><a href="https://github.com/Stonelinks" target="_blank" class="social"><i class="fa fa-github"></i></a><a href="https://twitter.com/#!/Stonelinks" target="_blank" class="social"><i class="fa fa-twitter"></i></a><a href="https://plus.google.com/116178490514652721625/posts" target="_blank" class="social"><i class="fa fa-google-plus"></i></a><a href="http://www.linkedin.com/pub/lucas-doyle/25/550/169" target="_blank" class="social"><i class="fa fa-linkedin"></i></a><a href="http://www.youtube.com/user/RealStonelinks" target="_blank" class="social"><i class="fa fa-youtube"></i></a><a href="/contact.html" class="footer-link">contact</a>
          </div>
        </div>
      </div>
    </footer>
  </body>
</html>