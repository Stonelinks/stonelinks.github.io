<!DOCTYPE html>
 <html lang="en"><head><meta charset="utf-8"/><meta http-equiv="X-UA-Compatible" content="IE=edge"/><meta name="viewport" content="width=device-width, initial-scale=1.0 maximum-scale=5.0"/><title>Stonelinks web framework (defunct) | Stonelinks</title><style id="typography.js">html{font-family:sans-serif;-ms-text-size-adjust:100%;-webkit-text-size-adjust:100%}body{margin:0}article,aside,details,figcaption,figure,footer,header,main,menu,nav,section,summary{display:block}audio,canvas,progress,video{display:inline-block}audio:not([controls]){display:none;height:0}progress{vertical-align:baseline}[hidden],template{display:none}a{background-color:transparent;-webkit-text-decoration-skip:objects}a:active,a:hover{outline-width:0}abbr[title]{border-bottom:none;text-decoration:underline;text-decoration:underline dotted}b,strong{font-weight:inherit;font-weight:bolder}dfn{font-style:italic}h1{font-size:2em;margin:.67em 0}mark{background-color:#ff0;color:#000}small{font-size:80%}sub,sup{font-size:75%;line-height:0;position:relative;vertical-align:baseline}sub{bottom:-.25em}sup{top:-.5em}img{border-style:none}svg:not(:root){overflow:hidden}code,kbd,pre,samp{font-family:monospace,monospace;font-size:1em}figure{margin:1em 40px}hr{box-sizing:content-box;height:0;overflow:visible}button,input,optgroup,select,textarea{font:inherit;margin:0}optgroup{font-weight:700}button,input{overflow:visible}button,select{text-transform:none}[type=reset],[type=submit],button,html [type=button]{-webkit-appearance:button}[type=button]::-moz-focus-inner,[type=reset]::-moz-focus-inner,[type=submit]::-moz-focus-inner,button::-moz-focus-inner{border-style:none;padding:0}[type=button]:-moz-focusring,[type=reset]:-moz-focusring,[type=submit]:-moz-focusring,button:-moz-focusring{outline:1px dotted ButtonText}fieldset{border:1px solid silver;margin:0 2px;padding:.35em .625em .75em}legend{box-sizing:border-box;color:inherit;display:table;max-width:100%;padding:0;white-space:normal}textarea{overflow:auto}[type=checkbox],[type=radio]{box-sizing:border-box;padding:0}[type=number]::-webkit-inner-spin-button,[type=number]::-webkit-outer-spin-button{height:auto}[type=search]{-webkit-appearance:textfield;outline-offset:-2px}[type=search]::-webkit-search-cancel-button,[type=search]::-webkit-search-decoration{-webkit-appearance:none}::-webkit-input-placeholder{color:inherit;opacity:.54}::-webkit-file-upload-button{-webkit-appearance:button;font:inherit}html{font-size:112.5%;line-height:1.61em;box-sizing:border-box;overflow-y:scroll;}*{box-sizing:inherit;}*:before{box-sizing:inherit;}*:after{box-sizing:inherit;}body{color:hsl(0,0%,20%);font-family:Lato,sans-serif;font-weight:400;word-wrap:break-word;}img{max-width:100%;margin:0;padding:0;margin-bottom:1.61rem;}h1{margin:0;padding:0;margin-bottom:1.61rem;color:hsl(0,0%,20%);font-family:Lato,sans-serif;font-weight:700;text-rendering:optimizeLegibility;font-size:2rem;line-height:2.415rem;}h2{margin:0;padding:0;margin-bottom:1.61rem;color:hsl(0,0%,20%);font-family:Lato,sans-serif;font-weight:700;text-rendering:optimizeLegibility;font-size:1.7411rem;line-height:2.415rem;}h3{margin:0;padding:0;margin-bottom:1.61rem;color:hsl(0,0%,20%);font-family:Lato,sans-serif;font-weight:700;text-rendering:optimizeLegibility;font-size:1.51572rem;line-height:2.415rem;}h4{margin:0;padding:0;margin-bottom:1.61rem;color:hsl(0,0%,20%);font-family:Lato,sans-serif;font-weight:700;text-rendering:optimizeLegibility;font-size:1.31951rem;line-height:1.61rem;}h5{margin:0;padding:0;margin-bottom:1.61rem;color:hsl(0,0%,20%);font-family:Lato,sans-serif;font-weight:700;text-rendering:optimizeLegibility;font-size:1.1487rem;line-height:1.61rem;}h6{margin:0;padding:0;margin-bottom:1.61rem;color:hsl(0,0%,20%);font-family:Lato,sans-serif;font-weight:700;text-rendering:optimizeLegibility;font-size:1rem;line-height:1.61rem;}hgroup{margin:0;padding:0;margin-bottom:1.61rem;}ul{margin:0;padding:0;margin-bottom:1.61rem;list-style-position:outside;list-style-image:none;margin-left:1.61rem;}ol{margin:0;padding:0;margin-bottom:1.61rem;list-style-position:outside;list-style-image:none;margin-left:1.61rem;}dl{margin:0;padding:0;margin-bottom:1.61rem;}dd{margin:0;padding:0;margin-bottom:1.61rem;}p{margin:0;padding:0;margin-bottom:1.61rem;}figure{margin:0;padding:0;margin-bottom:1.61rem;}pre{margin:0;padding:0;margin-bottom:1.61rem;font-size:0.85rem;line-height:1.61rem;}table{margin:0;padding:0;margin-bottom:1.61rem;font-size:1rem;line-height:1.61rem;border-collapse:collapse;width:100%;}fieldset{margin:0;padding:0;margin-bottom:1.61rem;}blockquote{margin:0;padding:0;margin-bottom:1.61rem;margin-right:1.61rem;margin-left:1.61rem;}form{margin:0;padding:0;margin-bottom:1.61rem;}noscript{margin:0;padding:0;margin-bottom:1.61rem;}iframe{margin:0;padding:0;margin-bottom:1.61rem;}hr{margin:0;padding:0;margin-bottom:calc(1.61rem - 1px);background:hsl(0,0%,80%);border:none;height:1px;}address{margin:0;padding:0;margin-bottom:1.61rem;}b{font-weight:700;}strong{font-weight:700;}dt{font-weight:700;}th{font-weight:700;}li{margin-bottom:calc(1.61rem / 2);}ol li{padding-left:0;}ul li{padding-left:0;}li > ol{margin-left:1.61rem;margin-bottom:calc(1.61rem / 2);margin-top:calc(1.61rem / 2);}li > ul{margin-left:1.61rem;margin-bottom:calc(1.61rem / 2);margin-top:calc(1.61rem / 2);}code{font-size:0.85rem;line-height:1.61rem;}kbd{font-size:0.85rem;line-height:1.61rem;}samp{font-size:0.85rem;line-height:1.61rem;}abbr{border-bottom:1px dotted hsl(0,0%,50%);cursor:help;}acronym{border-bottom:1px dotted hsl(0,0%,50%);cursor:help;}abbr[title]{border-bottom:1px dotted hsl(0,0%,50%);cursor:help;text-decoration:none;}thead{text-align:left;}td,th{text-align:left;border-bottom:1px solid hsl(0,0%,88%);padding-left:1.07333rem;padding-right:1.07333rem;padding-top:0.805rem;padding-bottom:calc(0.805rem - 1px);}th:first-child,td:first-child{padding-left:0;}th:last-child,td:last-child{padding-right:0;}@media only screen and (max-width:768px){h1{font-size:2rem;line-height:2.415rem;}h2{font-size:1.7411rem;line-height:2.415rem;}h3{font-size:1.51572rem;line-height:2.415rem;}h4{font-size:1.31951rem;line-height:1.61rem;}h5{font-size:1.1487rem;line-height:1.61rem;}h6{font-size:1rem;line-height:1.61rem;}}</style><link href="//fonts.googleapis.com/css?family=Lato:400,700" rel="stylesheet" type="text/css"/></head><body><div id="react-mount"><div style="max-width:41.86rem;margin-left:auto;margin-right:auto;padding:1.2075rem;" data-reactroot="" data-reactid="1" data-react-checksum="1720488295"><header style="margin-bottom:1.61rem;" data-reactid="2"><div data-reactid="3"><h3 style="margin-top:0;margin-bottom:0;font-size:1.51572rem;line-height:2.415rem;" data-reactid="4"><a style="box-shadow:none;text-decoration:none;color:inherit;" href="/" data-reactid="5"><img src="/icon.png" style="margin:0;margin-top:-4px;border:0;width:35px;height:35px;vertical-align:middle;" data-reactid="6"/><!-- react-text: 7 --> <!-- /react-text --><!-- react-text: 8 -->Stonelinks<!-- /react-text --></a></h3></div><hr style="margin-top:0.805rem;margin-bottom:0.805rem;background-color:gray;" data-reactid="9"/><span data-reactid="10"><a href="/" data-reactid="11">Home</a><!-- react-text: 12 --> | <!-- /react-text --><a href="/posts/" data-reactid="13">Posts</a><!-- react-text: 14 --> | <!-- /react-text --><a href="/projects/" data-reactid="15">Projects</a><!-- react-text: 16 --> | <!-- /react-text --><a href="/about/" data-reactid="17">About</a></span></header><div class="markdown" data-reactid="18"><div data-reactid="19"><h1 style="margin-top:0;margin-bottom:0.4025rem;" data-reactid="20">Stonelinks web framework (defunct)</h1></div><div class="article" data-reactid="21"><p><img src="/projects/stonelinks/stonelinks-web-framework.png" alt=""></p>
<p>This project is my take on how writing a mostly static website with a lot of content should work. It is what runs this very website. It requires no server side scripting or database of any kind. The whole thing is static files that are compiled from markdown files. It is a not well suited for web apps with an API and lots of dynamic content.</p>
<h2>History</h2>
<p>“Stonelinks” is a moniker I use for myself all over the internet and of course the name of this website. In one form or another, Stonelinks has been online since late 2008 when I decided to figure out how the internet works (a task which is still ongoing).</p>
<p>Since 2008, Stonelinks has gone through many incarnations. For a long time it ran on wordpress (before I knew how to program mind you!). As is the way with many wordpress sites I’ve been involved in, the whole thing was a bit overgrown, cluttered and hard to control. Since Stonelinks is fundamentally static content (mostly), I thought that there had to be a better way.</p>
<p>Fast forward to winter break 2012. I happened to have a bunch of spare time on a cruise with no internet access. Like any sensible programming addict, I really wanted a new project to occupy myself with while I sat around watching people gorge themselves on the lido deck. Hence this incarnation of Stonelinks was born!</p>
<h2>Design</h2>
<p>My design goals for this was to have something that, from an authors perspective, was dead simple to use. Basically all I wanted authors to do is create a single <a href="http://daringfireball.net/projects/markdown/">markdown</a> file with just the body of a page and have it automatically add the rest of the website around it. This means things like contextual sidebars, navigation, comments, links, etc.</p>
<p>In keeping with the goal of trying to keep this as simple as possible, this meant no server side scripting languages or databases. I tried to only add complexity as I needed it. Therefore, all the content of this website is static HTML that was automatically generated.</p>
<p>In hindsight, static HTML generators like this have been done a zillion times before. Hyde and Firmant come to mind. But as with a lot of things, its feels nice to make a tool yourself and use it for yourself. Things like this also help me appreciate the work and expertise that others have done. Too many times I have heard programmers say things like “django sucks!”. If django sucks so much, try to write something that does what django does (or better yet, submit a patch or something), then we’ll talk! <strong>tl;dr</strong>: <a href="http://en.wikipedia.org/wiki/Eating_your_own_dog_food">eat your own dog food</a>.</p>
<h2>Features</h2>
<ul>
<li>Page hierarchy
<ul>
<li>Store all content as markdown files structured into directories to form a hierarchy</li>
<li>Automatic generation of a site map based on hierarchy</li>
<li>Automatic generation of navigation sidebar for all pages on the same level in hierarchy</li>
<li>Automatic generation of index pages in a directory if an <code>index.md</code> file doesn’t exist (sorta how apache does)</li>
<li>Breadcrumb navigation for each page from root of tree to current page</li>
</ul>
</li>
<li>URL control
<ul>
<li>Should be able to control everything about a URL from:
<ul>
<li>Name of markdown file</li>
<li>Location in a directory</li>
</ul>
</li>
</ul>
</li>
<li>Portability
<ul>
<li>Should be able to build locally and deploy the website anywhere</li>
<li>Preview changes to website locally without connection to internet</li>
<li>Easy and fast to deploy (deploy scripts that use rsync)</li>
</ul>
</li>
<li>Shortcodes:
<ul>
<li>Easy creation of relative links to preserve portability.</li>
<li>Enabling and disable comments</li>
<li>Easy inclusion of galleries</li>
<li>Time / date / other convenience functions</li>
</ul>
</li>
<li>Misc features
<ul>
<li>Support for a blog:
<ul>
<li>Sort entries based on date</li>
<li>Indexes are paginated listings of posts (like you would expect on a blog)</li>
<li>Automatic full archives</li>
</ul>
</li>
<li>Write all content in markdown</li>
<li>Comments via disqus</li>
<li>Page minification</li>
</ul>
</li>
</ul>
<h2>Code</h2>
<p>Check out the source code on <a href="https://github.com/Stonelinks/stonelinks.org">github</a></p>
<h2>How to use</h2>
<p>The general process of how to use the Stonelinks web framework is pretty simple:</p>
<ul>
<li>Pull down the git repository</li>
<li>Write the content of your web pages in markdown files</li>
<li>Put them in the <code>content</code> directory either alone or put related files a directory</li>
<li>Change some simple settings in <a href="http://config.py">config.py</a></li>
<li>Modify the makefile to deploy to your web server of choice</li>
<li>Run <code>make site</code></li>
</ul>
<h2>How it works</h2>
<p>First, a website object from <code>objects.py</code> is created. It crawls the source directory (in this case it is <code>content</code>) and constructs a tree out of the filenames and directory names contained inside. In the tree, each node is actually a page object. At first glance, this makes no sense because it means directories are actually being picked up as files representing web pages. However, as we will soon see, if an <code>index.md</code> file is not present under a directory, the parent directory page object will yield an automatically generated index similar to what apache and other webservers do.</p>
<h3>Traversal</h3>
<p>Once a tree has been made, whenever an operation needs to be conducted on a page by page basis (like say, generating the html for sidebar navigation on each page), there exists a utility function inside the website object called <code>traverse</code> that will visit every page in the tree breadth-first style. <code>traverse</code> accepts a functional argument that it will in turn call on every page it visits as it traverses through the tree.</p>
<p>In addition to automatically generating sidebars on each page, a few other things are done using this <code>traverse</code> technique:</p>
<ul>
<li>Site map</li>
<li>Automatic indexes</li>
<li>Site compilation</li>
</ul>
<h3>Page and site compilation</h3>
<p>To compile a single page, take a look at <code>pages.py</code>. To see how the whole site is compiled, take a look at <code>gen_pages</code> in <code>objects.py</code>.</p>
<h3>Automatic indexes</h3>
<p>Lets consider a website with the following structure:</p>
<ul>
<li><code>root</code> (folder)
<ul>
<li><code>index.md</code></li>
<li><code>contact.md</code></li>
<li><code>about.md</code></li>
<li><code>projects</code> (folder)
<ul>
<li><code>project1.md</code></li>
<li><code>project2.md</code></li>
<li><code>project3.md</code></li>
</ul>
</li>
</ul>
</li>
</ul>
<p>As you can see, the files <code>index.md</code>, <code>content.md</code>, <code>about.md</code>, and <code>projects[1-3].md</code> are compiled in a straightforward manner, and their html files are placed in the corresponding location in the build directory. However, one will notice that if you were to visit <code>www.domain.com/projects</code>, no index would be presented. Therefore, when this occurs, the parent page object (created from the <code>projects</code> directory) generates a dummy index.</p>
</div><div data-reactid="22"><!-- react-empty: 23 --><hr style="background-color:gray;" data-reactid="24"/><p style="margin-bottom:1.61rem;" data-reactid="25"><a href="/about/" data-reactid="26"><img src="/author.png" alt="Lucas Doyle" style="float:left;margin-top:0;margin-bottom:0;margin-right:0.4025rem;width:3.22rem;height:3.22rem;border-radius:50%;border:1px gray solid;" data-reactid="27"/></a><span data-reactid="28"><!-- react-text: 29 -->Written by <!-- /react-text --><a href="/about/" data-reactid="30">Lucas Doyle</a><!-- react-text: 31 -->, a robotics engineer who does a lot of web development in San Francisco.<!-- /react-text --></span></p></div></div><span style="display:block;clear:both;" data-reactid="32"> </span></div></div><script src="/bundle.js?t=1479263969851"></script></body></html>