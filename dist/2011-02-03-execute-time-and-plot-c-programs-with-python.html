<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <title>Execute, Time and Plot C++ Programs with Python | Stonelinks</title>

    <link rel="stylesheet" href="assets/css/main.css">

    <!--[if lt IE 9]>
      <script src="https://oss.maxcdn.com/libs/html5shiv/3.7.0/html5shiv.js"></script>
      <script src="https://oss.maxcdn.com/libs/respond.js/1.4.2/respond.min.js"></script>
    <![endif]-->

    <script src="assets/vendor/jquery/dist/jquery.min.js"></script>
    <script src="assets/vendor/bootstrap/dist/js/bootstrap.min.js"></script>
    <script type="text/javascript">
      window.ASSETS = 'assets';
      window.BASENAME = '2011-02-03-execute-time-and-plot-c-programs-with-python';
      window.BG_IMAGES = 'dist/assets/img/backgrounds/0GBq3.jpg,dist/assets/img/backgrounds/1021101552.jpg,dist/assets/img/backgrounds/121027_162023_000.jpg,dist/assets/img/backgrounds/1780754_589564401120703_639857649_n (1).jpg,dist/assets/img/backgrounds/1979230_10152035339809685_1025831531_o.jpg,dist/assets/img/backgrounds/1RLhRK0.jpg,dist/assets/img/backgrounds/2000-01-01 08.30.12.jpg,dist/assets/img/backgrounds/2010-08-19 19.25.57.jpg,dist/assets/img/backgrounds/2010-08-21 01.04.54.jpg,dist/assets/img/backgrounds/2011-04-23_07-35-15_846.jpg,dist/assets/img/backgrounds/2012-05-21_12-21-51_382.jpg,dist/assets/img/backgrounds/2012-06-13_11-30-01_10.jpg,dist/assets/img/backgrounds/2012-06-13_13-04-51_940.jpg,dist/assets/img/backgrounds/2012-12-02 00.41.05.jpg,dist/assets/img/backgrounds/2012-12-06 15.09.02.jpg,dist/assets/img/backgrounds/2013-02-01 01.13.24.jpg,dist/assets/img/backgrounds/2013-02-24 12.17.52.jpg,dist/assets/img/backgrounds/2013-03-03 17.53.11.jpg,dist/assets/img/backgrounds/2013-04-30 15.05.44.jpg,dist/assets/img/backgrounds/2013-05-01 08.31.27.jpg,dist/assets/img/backgrounds/2013-05-18 13.07.32.jpg,dist/assets/img/backgrounds/2013-06-09 20.34.50.jpg,dist/assets/img/backgrounds/2013-08-22 13.00.42.jpg,dist/assets/img/backgrounds/2013-08-30 18.41.41.jpg,dist/assets/img/backgrounds/2013-08-30 19.58.14.jpg,dist/assets/img/backgrounds/2013-09-20 05.09.53.jpg,dist/assets/img/backgrounds/2013-09-20 05.26.41.jpg,dist/assets/img/backgrounds/2013-09-20 05.30.41.jpg,dist/assets/img/backgrounds/2013-09-20 05.32.01.jpg,dist/assets/img/backgrounds/2013-11-24 18.07.08.jpg,dist/assets/img/backgrounds/2013-11-24 19.05.27.jpg,dist/assets/img/backgrounds/2013-11-25 15.04.06.jpg,dist/assets/img/backgrounds/2013-11-26 12.22.19.jpg,dist/assets/img/backgrounds/2013-12-20 14.27.13.jpg,dist/assets/img/backgrounds/2013-12-28 19.16.24.jpg,dist/assets/img/backgrounds/2014-02-18 15.05.18.jpg,dist/assets/img/backgrounds/2048 (1).jpg,dist/assets/img/backgrounds/2048.jpg,dist/assets/img/backgrounds/2700262886_6b0fd48dc8_b.jpg,dist/assets/img/backgrounds/3248918413_1deff78256_o.jpg,dist/assets/img/backgrounds/34DnPmX.jpg,dist/assets/img/backgrounds/4-1-14-019.jpg,dist/assets/img/backgrounds/495251.jpg,dist/assets/img/backgrounds/5bml6q6.jpg,dist/assets/img/backgrounds/5gn0Uw6.jpg,dist/assets/img/backgrounds/75MtJTF.jpg,dist/assets/img/backgrounds/7SqL0BC.jpg,dist/assets/img/backgrounds/7jWBoem.jpg,dist/assets/img/backgrounds/A52It0Q.jpg,dist/assets/img/backgrounds/AYmUVEm.jpg,dist/assets/img/backgrounds/CWA87fd.jpg,dist/assets/img/backgrounds/CcMlC0x.jpg,dist/assets/img/backgrounds/DQBkjl0.jpg,dist/assets/img/backgrounds/Dtd8OaS.jpg,dist/assets/img/backgrounds/EWwV235.jpg,dist/assets/img/backgrounds/Eourq.jpg,dist/assets/img/backgrounds/FDoNLz1.jpg,dist/assets/img/backgrounds/FEBKL.jpg,dist/assets/img/backgrounds/GkWIkzl.jpg,dist/assets/img/backgrounds/GpCUV.jpg,dist/assets/img/backgrounds/IMG_1142 copy-X2.jpg,dist/assets/img/backgrounds/IMG_20120721_181258.jpg,dist/assets/img/backgrounds/IMG_20120825_201522.jpg,dist/assets/img/backgrounds/IPwZZ29.jpg,dist/assets/img/backgrounds/IQgb2Fb.jpg,dist/assets/img/backgrounds/IZyTICW.jpg,dist/assets/img/backgrounds/IijALtC.jpg,dist/assets/img/backgrounds/J8Oqyyd.jpg,dist/assets/img/backgrounds/K29Lcr9.jpg,dist/assets/img/backgrounds/KBMGZnm.jpg,dist/assets/img/backgrounds/MbN1OhC.jpg,dist/assets/img/backgrounds/NIkQVMz.jpg,dist/assets/img/backgrounds/ONn4OVE.jpg,dist/assets/img/backgrounds/PeoCslF.jpg,dist/assets/img/backgrounds/Su2lQ3B.jpg,dist/assets/img/backgrounds/TUZyh.jpg,dist/assets/img/backgrounds/TeCkq.jpg,dist/assets/img/backgrounds/UP_EMD_SD9043AC_Joso_Bridge_USA.jpg,dist/assets/img/backgrounds/Up2Vo3r.jpg,dist/assets/img/backgrounds/VSk6zdp.jpg,dist/assets/img/backgrounds/XYWsmJC.jpg,dist/assets/img/backgrounds/Xn25v.jpg,dist/assets/img/backgrounds/XvkHfUA.jpg,dist/assets/img/backgrounds/YseOPg6.jpg,dist/assets/img/backgrounds/bHVlqeR.jpg,dist/assets/img/backgrounds/bXTsleX.jpg,dist/assets/img/backgrounds/bila_ur_orbylgjuofn.jpg,dist/assets/img/backgrounds/d7t5BrZ.jpg,dist/assets/img/backgrounds/desert_city.jpg,dist/assets/img/backgrounds/dgkyzrS.jpg,dist/assets/img/backgrounds/enukwns.jpg,dist/assets/img/backgrounds/fr42b.jpg,dist/assets/img/backgrounds/hTkXfEY.jpg,dist/assets/img/backgrounds/heic0504b.jpg,dist/assets/img/backgrounds/highflight-operationa-go8.jpg,dist/assets/img/backgrounds/irG4gJF.jpg,dist/assets/img/backgrounds/k9JWU9N.jpg,dist/assets/img/backgrounds/kQj6gNC.jpg,dist/assets/img/backgrounds/m1gD1NC.jpg,dist/assets/img/backgrounds/m95qL89.jpg,dist/assets/img/backgrounds/mooCZ.jpg,dist/assets/img/backgrounds/n0qGynd.jpg,dist/assets/img/backgrounds/nLpQ2G3.jpg,dist/assets/img/backgrounds/ozjI2XF.jpg,dist/assets/img/backgrounds/pTApMWS.jpg,dist/assets/img/backgrounds/raddmHE.jpg,dist/assets/img/backgrounds/s_f02_RTR3FJM0.jpg,dist/assets/img/backgrounds/tmEkJ7Q.jpg,dist/assets/img/backgrounds/uMrsMXh.jpg,dist/assets/img/backgrounds/vmBnAIS.jpg,dist/assets/img/backgrounds/wallpaper-1312831.jpg,dist/assets/img/backgrounds/wallpaper-1441536.jpg,dist/assets/img/backgrounds/wjZsmhr.jpg,dist/assets/img/backgrounds/xcwvm7i.jpg,dist/assets/img/backgrounds/xkl9FoE.jpg,dist/assets/img/backgrounds/xrH9T22.jpg,dist/assets/img/backgrounds/y4WGD7I.jpg,dist/assets/img/backgrounds/yrZCDd1.jpg,dist/assets/img/backgrounds/ywhjtHh.jpg,dist/assets/img/backgrounds/znfvr.jpg'.split(',');
    </script>
    <script src="assets/js/main.js"></script>
  </head>
  <body>

    



<div class="landing">
  <a href="index.html" class="brand"><img src="assets/img/logos/big-logo.png"> Stonelinks</a>
  <div class="tagline-bar">Lucas Doyle&#x27;s website</div>
</div>

<div class="navbar navbar-default" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle" data-toggle="collapse" data-target=".navbar-collapse">
        <span class="sr-only">Toggle navigation</span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <a class="navbar-brand" href="index.html">
        <img src="assets/img/logos/big-logo.png">
        Stonelinks<br/>
        <small class="text-muted">Lucas Doyle&#x27;s website</small>
      </a>
    </div>
    <div class="navbar-collapse collapse">
      <ul class="nav navbar-nav">
        <li>
          <a href="/blog.html">Blog</a>
        </li>
        <li>
          <a href="/about.html">About</a>
        </li>
        <li>
          <a href="/projects.html">Projects</a>
        </li>
      </ul>
    </div>
  </div>
</div>


<div class="container">

  

<div class="row">
  <div class="box">
    <div class="col-lg-12">
      <hr>
      <a href="/2011-02-03-execute-time-and-plot-c-programs-with-python.html">
      <h1 class="intro-text text-center">Execute, Time and Plot C++ Programs with Python
      <br/>
      <small>02/03/2011</small>
      </h1></a>
      <hr>
      

<center>
<img src="img/misc/Fig.png" class="thumbnail" width="80%">
</center>

Hate excel? Have python take all the pain away from you! This should appeal to everyone out there who needs a quick way to analyze the runtime time of a bunch of commands to a program given an arbitrary list of arguments. Hating excel/openoffice/spreadsheets in general is optional.

Just like every programmer, I am always trying to find new and interesting ways of automating myself out of a job. To that end, I wrote a pretty cool program last night to help automate my first algorithms lab.

Consistent with the recent trend of mine, it is in python and makes use of the [subprocess](http://docs.python.org/library/subprocess.html) module to spawn and time instances of my C++ program and [pylab](http://matplotlib.sourceforge.net/) to make plotting the times super easy. The comments in my code explain things in more detail, but here is the one sentence summary: Python is being used to execute two programs written in C++ with the same set of arguments and spits out a plot of their times. In this case the two C++ programs are recursive (rfib) and iterative (ifib) implementations of the Fibonacci algorithm. The fun stuff is in the python:

<pre>
#!/usr/bin/env python

# Lucas Doyle wrote this

import subprocess
import string
import sys
import pylab  # matplotlib

def timerun(program, args) :
    print 'Starting timed execution of ' + program + ' with ' + str(len(args)) + ' arguments.'
    i = 1
    
    # Execute program, once for each n argument
    for n in args :
        
        # This was really annoying. Build the arguments to the time system call to the time command.
        # First of all, for whatever reason 'time' didn't work correctly with any arguments other than -p, 
        # so I used /usr/bin/time instead. Since I could not figure out why the output of 'time' was not
        # coming back to stdin, I use the -o (output file) and -a (append) option to just output the real
        # execution time ( thats where '-f' and '%e' comes from ) to the file.
        p = subprocess.Popen(['/usr/bin/time', '-o', 'runtimes.txt', '-a', '-f', '%e', './' + program, str(n)], stdout=subprocess.PIPE)
        
        # Read back from stdin, print where we are (not required, but its nice)
        output = p.communicate()[0]
        sys.stdout.write( str(i) + ':\tfib('+ str(n) + ') = ' + output)
        i += 1
    print 'done'
    
    # Open up, read and return the times in the output file
    f = open('runtimes.txt', 'r')
    times = f.read().splitlines()

    # Clean up old runtimes
    subprocess.Popen(['rm', 'runtimes.txt'],stdout=subprocess.PIPE)
    
    return times

def main():
    
    # Arguments we are interested in testing runtimes for
    # args = 1, 5, 10, 15, 20, 25, 30, 35, 40, 41, 42, 43, 44, 45, 46, 47, 48
    args = range(1, 56)
    
    
    
    # Compute the runtimes of the recursive algorithm, then the iterative one
    rtimes = timerun('rfib', args)
    itimes = timerun('ifib', args)

    # Plot it with pylab
    pylab.xlabel('N')
    pylab.ylabel('Time to compute fib(N) (seconds)')
    pylab.title('Recursive vs. Iterative Execution Time for Fibionacci Sequence')
    pylab.plot(args, rtimes, 'ro-', label='Recursive')
    pylab.plot(args, itimes, 'bo-', label='Iterative')
    pylab.legend()

    # other drawing styles for plots in pylab:
    # 'r' red line, 'g' green line, 'y' yellow line 
    # 'ro' red dots as markers, 'r.' smaller red dots, 'r+' red pluses
    # 'r--' red dashed line, 'g^' green triangles, 'bs' blue squares
    # 'rp' red pentagons, 'r1', 'r2', 'r3', 'r4' well, check out the markers

    # save the plot as a PNG image
    pylab.savefig('Fig.png')

    # show the pylab plot window
    pylab.show()

if __name__ == "__main__":
    main()

</pre>

I've also attached the whole lab [here](misc/lab1.zip) in case the python does not make sense by itself. Hope someone finds this useful!


    </div>
  </div>
</div>


</div>



<footer>
    <div class="container">
        <div class="row">
            <div class="col-lg-12 text-center">
              
                <a class="social" href="https://www.facebook.com/stonelinks" target="_blank">
                  <i class="fa fa-facebook"></i>
                </a>
              
                <a class="social" href="https://github.com/Stonelinks" target="_blank">
                  <i class="fa fa-github"></i>
                </a>
              
                <a class="social" href="https://twitter.com/#!/Stonelinks" target="_blank">
                  <i class="fa fa-twitter"></i>
                </a>
              
                <a class="social" href="https://plus.google.com/116178490514652721625/posts" target="_blank">
                  <i class="fa fa-google-plus"></i>
                </a>
              
                <a class="social" href="http://www.linkedin.com/pub/lucas-doyle/25/550/169" target="_blank">
                  <i class="fa fa-linkedin"></i>
                </a>
              
                <a class="social" href="http://www.youtube.com/user/RealStonelinks" target="_blank">
                  <i class="fa fa-youtube"></i>
                </a>
              
              <a class="footer-link" href="">
                contact
              </a>
            </div>
        </div>
    </div>
</footer>



  </body>
</html>
