<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <title>Recursive Directory Lister | Stonelinks</title>

    <link rel="stylesheet" href="assets/css/main.css">

    <!--[if lt IE 9]>
      <script src="https://oss.maxcdn.com/libs/html5shiv/3.7.0/html5shiv.js"></script>
      <script src="https://oss.maxcdn.com/libs/respond.js/1.4.2/respond.min.js"></script>
    <![endif]-->
  </head>
  <body>

    



<a href="index.html" class="brand"><img src="assets/img/logos/big-logo.png"> Stonelinks</a>
<div class="tagline-bar">The brainchild of Lucas Doyle</div>

<div class="navbar navbar-default" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle" data-toggle="collapse" data-target=".navbar-collapse">
        <span class="sr-only">Toggle navigation</span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <a class="navbar-brand" href="index.html">
        Stonelinks
      </a>
    </div>
    <div class="navbar-collapse collapse">
      <ul class="nav navbar-nav">
        <li>
          <a href="/blog.html">Blog</a>
        </li>
        <li>
          <a href="/about.html">About</a>
        </li>
        <li>
          <a href="/projects.html">Projects</a>
        </li>
      </ul>
    </div>
  </div>
</div>


<div class="container">

  

<div class="row">
  <div class="box">
    <div class="col-lg-12">
      <hr>
      <a href="/2010-09-30-recursive-directory-lister.html">
      <h1 class="intro-text text-center">Recursive Directory Lister
      <br/>
      <small>09/30/2010</small>
      </h1></a>
      <hr>
      <p><strong><em> This is old. Look at posts if you want to see current versions of my projects. This was like the first thing of great significance I did with Stonelinks on my own (read: I didn&#39;t know what I was doing). Similar to the Windows based webcam thing, I thought it was a big deal at the time. Looking back it is funny how trivial this would be to implement nowadays. Oh also, there are things in here that are just plain wrong and/or bad practice (left as an exercise to the reader to find). </em></strong></p>
<h1 id="purpose-and-demonstration">Purpose and Demonstration</h1>
<hr>
<p>You may notice that I have little collapsible trees all over the place on this website. I wanted a quick, easy and effective way to integrate entire directories of files on my computer on to webpages. Wasn&#39;t really happy with anything currently out there, so I made this myself. However, using <a href="http://jquery.com/">jquery</a> made things extremely easy.</p>
<h1 id="the-html">The HTML</h1>
<hr>
<p>Put this in your header! It loads the necessary files from the jquery treeview plugin. I recommend saving them somewhere local on your server.</p>
<h1 id="the-php">The PHP</h1>
<hr>
<p>It doesn&#39;t matter where this goes, but calling the function getDirectory() will echo the tree back on to your webpage.</p>
<pre>
// Use this to format filesizes into things that are human readable.
function format_bytes($size) {
    $units = array(' B', ' KB', ' MB', ' GB', ' TB');
    for ($i = 0; $size &gt;= 1024 &amp;&amp; $i &lt; 4; $i++) $size /= 1024;
    return round($size, 2).$units[$i];
}

function getDirectory($path='.',$level=0)
{
    // ignore anything that appears in this array
    $ignore=array('cgi-bin','.','..');

    // open the directory handle at the given path
    $dh=@opendir($path);

    // if this is the first level, set the class of the unordered list to match our javascript stuff
    if($level == 0)
    {
        echo'
<ul id="tree" class="filetree">
    <li>
<ul>';
    }
    echo'<span>';

    // while there are still directories to read
    while(false!==($file=readdir($dh)))
    {
        // if we should not ignore it
        if(!in_array($file,$ignore))
        {
            // if it is a directory
            if(is_dir("$path/$file"))
            {
                // if we're over the first level
                if($level&gt;=0)
                {
                    // display the folder closed by default
                    echo'
    <li class="closed">';
                }
                else
                {
                    // otherwise just use normal tags
                    echo'</li>
    <li>';
                }

                // write the folder to the webpage
                echo'<span class="folder"><strong>',$file,'</strong></span>';

                // now recursively call the function again to [hopefully] display any other files / folders
                getDirectory("$path/$file",($level+1));

                // close tags from our first few echos
                echo"</li>
</span></ul>
</li>
';
    }
    else
    {
        // if this is our second or more time, just use a normal unordered list tag
        echo'

";
            }
            // it isnt a directory, so its a file
            else
            {
                // display a link to the file along with the filesize
                echo'
    <li><span class="default"><a href=";                 echo &quot;">',' ',$file,'</a>    ('.format_bytes(filesize( $path.'/'.$file)).')</span></li>
';
            }
        // end ignore case
        }
    // end while loop
    }
    // close the handle
    closedir($dh);

    // added this so people know they can contribute to files on stonelinks
    echo'<a href="../stonelinks-uploader">
<h2>Contribute</h2>
</a>';
}</ul>
</pre>

    </div>
  </div>
</div>


</div>



<footer>
    <div class="container">
        <div class="row">
            <div class="col-lg-12 text-center">
                <p>Copyright &copy; Company 2013</p>
            </div>
        </div>
    </div>
</footer>



    <script src="https://code.jquery.com/jquery.js"></script>
    <script src="assets/vendor/bootstrap/dist/js/bootstrap.min.js"></script>
    <script type="text/javascript">
      window.ASSETS = 'assets';
      window.BG_IMAGES = 'dist/assets/img/backgrounds/1979230_10152035339809685_1025831531_o.jpg,dist/assets/img/backgrounds/2048 (1).jpg,dist/assets/img/backgrounds/2048.jpg,dist/assets/img/backgrounds/3248918413_1deff78256_o.jpg,dist/assets/img/backgrounds/495251.jpg,dist/assets/img/backgrounds/5 (1).jpg,dist/assets/img/backgrounds/5bml6q6.jpg,dist/assets/img/backgrounds/5gn0Uw6.jpg,dist/assets/img/backgrounds/7SqL0BC.jpg,dist/assets/img/backgrounds/7jWBoem.jpg,dist/assets/img/backgrounds/Abandoned-HARP-Gun.jpg,dist/assets/img/backgrounds/DQBkjl0.jpg,dist/assets/img/backgrounds/Eourq.jpg,dist/assets/img/backgrounds/IMG_1142 copy-X2.jpg,dist/assets/img/backgrounds/IijALtC.jpg,dist/assets/img/backgrounds/Tintern_Abbey-inside-2004.jpg,dist/assets/img/backgrounds/XvkHfUA.jpg,dist/assets/img/backgrounds/bXTsleX.jpg,dist/assets/img/backgrounds/enukwns.jpg,dist/assets/img/backgrounds/hTkXfEY.jpg,dist/assets/img/backgrounds/n0qGynd.jpg,dist/assets/img/backgrounds/ozjI2XF.jpg,dist/assets/img/backgrounds/s_f02_RTR3FJM0.jpg,dist/assets/img/backgrounds/wallpaper-1312831.jpg,dist/assets/img/backgrounds/wallpaper-1441536.jpg,dist/assets/img/backgrounds/wjZsmhr.jpg'.split(',');
    </script>
    <script src="assets/js/main.js"></script>
  </body>
</html>
